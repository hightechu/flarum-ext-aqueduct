{"version":3,"sources":["webpack://@flagrow/aqueduct/webpack/bootstrap","webpack://@flagrow/aqueduct/./forum.js","webpack://@flagrow/aqueduct/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flagrow/aqueduct/./node_modules/html5sortable/dist/html.sortable.js","webpack://@flagrow/aqueduct/./src/forum/addsBoardToDiscussion.js","webpack://@flagrow/aqueduct/./src/forum/components/Card.js","webpack://@flagrow/aqueduct/./src/forum/index.js","webpack://@flagrow/aqueduct/./src/forum/modals/AddColumnModal.js","webpack://@flagrow/aqueduct/./src/forum/pages/Board.js","webpack://@flagrow/aqueduct/./src/forum/routes.js","webpack://@flagrow/aqueduct/external \"flarum.core.compat['Component']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['Model']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['components/Button']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['components/DiscussionPage']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['components/Modal']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['components/Page']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['components/SplitDropdown']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['extend']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['helpers/avatar']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['helpers/highlight']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['helpers/icon']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['models/Discussion']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['tags/helpers/tagIcon']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['tags/helpers/tagLabel']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['tags/models/Tag']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['utils/ItemList']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['utils/classList']\""],"names":["extend","DiscussionPage","prototype","items","discussion","tags","filter","tag","position","isChild","controls","ItemList","canAccessBoard","canUseBoard","canManageBoard","forEach","add","slug","Button","component","children","app","translator","trans","name","icon","onclick","m","route","length","SplitDropdown","toArray","className","buttonClassName","Card","init","props","isUnread","view","jumpTo","Math","min","lastPostNumber","lastReadPostNumber","id","title","footerControls","user","console","log","element","$","tooltip","placement","apply","arguments","avatar","Component","initializers","Tag","Model","attribute","columns","hasMany","boardSort","boardMaxItems","Discussion","assignedUsers","assignedGroups","routes","addsBoardToDiscussion","AddColumnModal","for","store","all","indexOf","selected","prop","index","focused","content","toLowerCase","parent","substr","onready","tagLabel","withAttr","type","disabled","map","classList","pinned","child","colored","color","active","tagIcon","highlight","description","onsubmit","e","preventDefault","board","column","request","method","url","forum","then","results","pushPayload","modal","close","redraw","strategy","Modal","Board","bodyClass","draggable","dragging","refresh","config","isInitialized","context","setTitle","setTitleCount","setDraggable","isEmpty","show","style","loading","discussions","clear","getBy","param","sort","a","b","load","parseResults","data","getById","push","lazyRedraw","sorted","sortable","connectWith","placeholder","forcePlaceholderSize","addEventListener","target","attr","detail","endparent","sorting","find","get","updateDiscussionSorting","handle","updateColumnSorting","relationships","t","save","Page","path"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA,wC;;;;;;;;;;;;ACAA;AAAA;AAAe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;ACJA,iGAAC;AACD,MAAM,IAA0C;AAChD,IAAI,iCAAO,EAAE,oCAAE,OAAO;AAAA;AAAA;AAAA,oGAAC;AACvB,GAAG,MAAM,EAIN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,aAAa;AACxB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,aAAa;AACxB,WAAW,SAAS;AACpB;AACA;AACA;AACA,mBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,aAAa;AACxB;AACA;AACA;AACA,mBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,WAAW,EAAE;AACb;AACA;AACA;AACA,mBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB;AACA;AACA;AACA,mBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,WAAW,GAAG;AACd,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}",";(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.sortable = factory();\n  }\n}(this, function() {\n/*\n * HTML5 Sortable library\n * https://github.com/lukasoppermann/html5sortable\n *\n * Original code copyright 2012 Ali Farhadi.\n * This version is mantained by Lukas Oppermann <lukas@vea.re>\n * Previously also mantained by Alexandru Badiu <andu@ctrlz.ro>\n * jQuery-independent implementation by Nazar Mokrynskyi <nazar@mokrynskyi.com>\n *\n * Released under the MIT license.\n */\n'use strict'\n/*\n * variables global to the plugin\n */\nvar dragging\nvar draggingHeight\nvar placeholders = []\nvar sortables = []\n/**\n * Get or set data on element\n * @param {Element} element\n * @param {string} key\n * @param {*} value\n * @return {*}\n */\nvar _data = function (element, key, value) {\n  if (value === undefined) {\n    return element && element.h5s && element.h5s.data && element.h5s.data[key]\n  } else {\n    element.h5s = element.h5s || {}\n    element.h5s.data = element.h5s.data || {}\n    element.h5s.data[key] = value\n  }\n}\n/**\n * Remove data from element\n * @param {Element} element\n */\nvar _removeData = function (element) {\n  if (element.h5s) {\n    delete element.h5s.data\n  }\n}\n/**\n * Tests if an element matches a given selector. Comparable to jQuery's $(el).is('.my-class')\n * @param {el} DOM element\n * @param {selector} selector test against the element\n * @returns {boolean}\n */\n/* istanbul ignore next */\nvar _matches = function (el, selector) {\n  return (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector).call(el, selector)\n}\n/**\n * Filter only wanted nodes\n * @param {Array|NodeList} nodes\n * @param {Array/string} wanted\n * @returns {Array}\n */\nvar _filter = function (nodes, wanted) {\n  if (!wanted) {\n    return Array.prototype.slice.call(nodes)\n  }\n  var result = []\n  for (var i = 0; i < nodes.length; ++i) {\n    if (typeof wanted === 'string' && _matches(nodes[i], wanted)) {\n      result.push(nodes[i])\n    }\n    if (wanted.indexOf(nodes[i]) !== -1) {\n      result.push(nodes[i])\n    }\n  }\n  return result\n}\n/**\n * @param {Array|Element} element\n * @param {Array|string} event\n * @param {Function} callback\n */\nvar _on = function (element, event, callback) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      _on(element[i], event, callback)\n    }\n    return\n  }\n  element.addEventListener(event, callback)\n  element.h5s = element.h5s || {}\n  element.h5s.events = element.h5s.events || {}\n  element.h5s.events[event] = callback\n}\n/**\n * @param {Array|Element} element\n * @param {Array|string} event\n */\nvar _off = function (element, event) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      _off(element[i], event)\n    }\n    return\n  }\n  if (element.h5s && element.h5s.events && element.h5s.events[event]) {\n    element.removeEventListener(event, element.h5s.events[event])\n    delete element.h5s.events[event]\n  }\n}\n/**\n * @param {Array|Element} element\n * @param {string} attribute\n * @param {*} value\n */\nvar _attr = function (element, attribute, value) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      _attr(element[i], attribute, value)\n    }\n    return\n  }\n  element.setAttribute(attribute, value)\n}\n/**\n * @param {Array|Element} element\n * @param {string} attribute\n */\nvar _removeAttr = function (element, attribute) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      _removeAttr(element[i], attribute)\n    }\n    return\n  }\n  element.removeAttribute(attribute)\n}\n/**\n * @param {Element} element\n * @returns {{left: *, top: *}}\n */\nvar _offset = function (element) {\n  var rect = element.getClientRects()[0]\n  return {\n    left: rect.left + window.scrollX,\n    top: rect.top + window.scrollY\n  }\n}\n/*\n * remove event handlers from items\n * @param {Array|NodeList} items\n */\nvar _removeItemEvents = function (items) {\n  _off(items, 'dragstart')\n  _off(items, 'dragend')\n  _off(items, 'selectstart')\n  _off(items, 'dragover')\n  _off(items, 'dragenter')\n  _off(items, 'drop')\n}\n/*\n * Remove event handlers from sortable\n * @param {Element} sortable a single sortable\n */\nvar _removeSortableEvents = function (sortable) {\n  _off(sortable, 'dragover')\n  _off(sortable, 'dragenter')\n  _off(sortable, 'drop')\n}\n/*\n * Attach ghost to dataTransfer object\n * @param {Event} original event\n * @param {object} ghost-object with item, x and y coordinates\n */\nvar _attachGhost = function (event, ghost) {\n  // this needs to be set for HTML5 drag & drop to work\n  event.dataTransfer.effectAllowed = 'move'\n  // Firefox requires some arbitrary content in the data in order for\n  // the drag & drop functionality to work\n  event.dataTransfer.setData('text', 'arbitrary-content')\n\n  // check if setDragImage method is available\n  if (event.dataTransfer.setDragImage) {\n    event.dataTransfer.setDragImage(ghost.draggedItem, ghost.x, ghost.y)\n  }\n}\n/**\n * _addGhostPos clones the dragged item and adds it as a Ghost item\n * @param {Event} event - the event fired when dragstart is triggered\n * @param {object} ghost - .draggedItem = Element\n */\nvar _addGhostPos = function (event, ghost) {\n  if (!ghost.x) {\n    ghost.x = parseInt(event.pageX - _offset(ghost.draggedItem).left)\n  }\n  if (!ghost.y) {\n    ghost.y = parseInt(event.pageY - _offset(ghost.draggedItem).top)\n  }\n  return ghost\n}\n/**\n * _makeGhost decides which way to make a ghost and passes it to attachGhost\n * @param {Element} draggedItem - the item that the user drags\n */\nvar _makeGhost = function (draggedItem) {\n  return {\n    draggedItem: draggedItem\n  }\n}\n/**\n * _getGhost constructs ghost and attaches it to dataTransfer\n * @param {Event} event - the original drag event object\n * @param {Element} draggedItem - the item that the user drags\n */\n// TODO: could draggedItem be replaced by event.target in all instances\nvar _getGhost = function (event, draggedItem) {\n  // add ghost item & draggedItem to ghost object\n  var ghost = _makeGhost(draggedItem)\n  // attach ghost position\n  ghost = _addGhostPos(event, ghost)\n  // attach ghost to dataTransfer\n  _attachGhost(event, ghost)\n}\n/*\n * Remove data from sortable\n * @param {Element} sortable a single sortable\n */\nvar _removeSortableData = function (sortable) {\n  _removeData(sortable)\n  _removeAttr(sortable, 'aria-dropeffect')\n}\n/*\n * Remove data from items\n * @param {Array|Element} items\n */\nvar _removeItemData = function (items) {\n  _removeAttr(items, 'aria-grabbed')\n  _removeAttr(items, 'draggable')\n  _removeAttr(items, 'role')\n}\n/*\n * Check if two lists are connected\n * @param {Element} curList\n * @param {Element} destList\n */\nvar _listsConnected = function (curList, destList) {\n  if (curList === destList) {\n    return true\n  }\n  if (_data(curList, 'connectWith') !== undefined) {\n    return _data(curList, 'connectWith') === _data(destList, 'connectWith')\n  }\n  return false\n}\n/*\n * get handle or return item\n * @param {Array} items\n * @param {selector} handle\n */\nvar _getHandles = function (items, handle) {\n  var result = []\n  var handles\n  if (!handle) {\n    return items\n  }\n  for (var i = 0; i < items.length; ++i) {\n    handles = items[i].querySelectorAll(handle)\n    result = result.concat(Array.prototype.slice.call(handles))\n  }\n  return result\n}\n/*\n * Destroy the sortable\n * @param {Element} sortableElement a single sortable\n */\nvar _destroySortable = function (sortableElement) {\n  var opts = _data(sortableElement, 'opts') || {}\n  var items = _filter(_getChildren(sortableElement), opts.items)\n  var handles = _getHandles(items, opts.handle)\n  // remove event handlers & data from sortable\n  _removeSortableEvents(sortableElement)\n  _removeSortableData(sortableElement)\n  // remove event handlers & data from items\n  _off(handles, 'mousedown')\n  _removeItemEvents(items)\n  _removeItemData(items)\n}\n/*\n * Enable the sortable\n * @param {Element} sortableElement a single sortable\n */\nvar _enableSortable = function (sortableElement) {\n  var opts = _data(sortableElement, 'opts')\n  var items = _filter(_getChildren(sortableElement), opts.items)\n  var handles = _getHandles(items, opts.handle)\n  _attr(sortableElement, 'aria-dropeffect', 'move')\n  _data(sortableElement, '_disabled', 'false')\n  _attr(handles, 'draggable', 'true')\n  // IE FIX for ghost\n  // can be disabled as it has the side effect that other events\n  // (e.g. click) will be ignored\n  var spanEl = (document || window.document).createElement('span')\n  if (typeof spanEl.dragDrop === 'function' && !opts.disableIEFix) {\n    _on(handles, 'mousedown', function () {\n      if (items.indexOf(this) !== -1) {\n        this.dragDrop()\n      } else {\n        var parent = this.parentElement\n        while (items.indexOf(parent) === -1) {\n          parent = parent.parentElement\n        }\n        parent.dragDrop()\n      }\n    })\n  }\n}\n/*\n * Disable the sortable\n * @param {Element} sortableElement a single sortable\n */\nvar _disableSortable = function (sortableElement) {\n  var opts = _data(sortableElement, 'opts')\n  var items = _filter(_getChildren(sortableElement), opts.items)\n  var handles = _getHandles(items, opts.handle)\n  _attr(sortableElement, 'aria-dropeffect', 'none')\n  _data(sortableElement, '_disabled', 'true')\n  _attr(handles, 'draggable', 'false')\n  _off(handles, 'mousedown')\n}\n/*\n * Reload the sortable\n * @param {Element} sortableElement a single sortable\n * @description events need to be removed to not be double bound\n */\nvar _reloadSortable = function (sortableElement) {\n  var opts = _data(sortableElement, 'opts')\n  var items = _filter(_getChildren(sortableElement), opts.items)\n  var handles = _getHandles(items, opts.handle)\n  _data(sortableElement, '_disabled', 'false')\n  // remove event handlers from items\n  _removeItemEvents(items)\n  _off(handles, 'mousedown')\n  // remove event handlers from sortable\n  _removeSortableEvents(sortableElement)\n}\n/**\n * Get position of the element relatively to its sibling elements\n * @param {Element} element\n * @returns {number}\n */\nvar _index = function (element) {\n  if (!element.parentElement) {\n    return 0\n  }\n  return Array.prototype.indexOf.call(element.parentElement.children, element)\n}\n/**\n * Whether element is in DOM\n * @param {Element} element\n * @returns {boolean}\n */\nvar _attached = function (element) {\n  // document.body.contains(element)\n  return !!element.parentNode\n}\n/**\n * Convert HTML string into DOM element.\n * @param {Element|string} html\n * @param {string} tagname\n * @returns {Element}\n */\nvar _html2element = function (html, tagName) {\n  if (typeof html !== 'string') {\n    return html\n  }\n  var parentElement = document.createElement(tagName)\n  parentElement.innerHTML = html\n  return parentElement.firstChild\n}\n/**\n * Insert before target\n * @param {Element} target\n * @param {Element} element\n */\nvar _before = function (target, element) {\n  target.parentElement.insertBefore(\n    element,\n    target\n  )\n}\n/**\n * Insert after target\n * @param {Element} target\n * @param {Element} element\n */\nvar _after = function (target, element) {\n  target.parentElement.insertBefore(\n    element,\n    target.nextElementSibling\n  )\n}\n/**\n * Detach element from DOM\n * @param {Element} element\n */\nvar _detach = function (element) {\n  if (element.parentNode) {\n    element.parentNode.removeChild(element)\n  }\n}\n/**\n * Make native event that can be dispatched afterwards\n * @param {string} name\n * @param {object} detail\n * @returns {CustomEvent}\n */\nvar _makeEvent = function (name, detail) {\n  var e = document.createEvent('Event')\n  if (detail) {\n    e.detail = detail\n  }\n  e.initEvent(name, false, true)\n  return e\n}\n/**\n * @param {Element} sortableElement\n * @param {CustomEvent} event\n */\nvar _dispatchEventOnConnected = function (sortableElement, event) {\n  sortables.forEach(function (target) {\n    if (_listsConnected(sortableElement, target)) {\n      target.dispatchEvent(event)\n    }\n  })\n}\n\n/**\n * Creates and returns a new debounced version of the passed function which will postpone its execution until after wait milliseconds have elapsed\n * @param {fn} Function to debounce\n * @param {delay} time to wait before calling function with latest arguments, 0 - no debounce\n * @param {context} time to wait before calling function with latest arguments, 0 - no debounce\n * @returns {function} - debounced function\n */\nfunction _debounce (fn, delay, context) {\n  var timer = null\n\n  if (delay === 0) {\n    return fn\n  }\n  return function () {\n    var eContext = context || this\n    var args = arguments\n    clearTimeout(timer)\n    timer = setTimeout(function () {\n      fn.apply(eContext, args)\n    }, delay)\n  }\n}\n\nvar _getChildren = function (element) {\n  return element.children\n}\n\nvar _serialize = function (list) {\n  var children = _filter(_getChildren(list), _data(list, 'items'))\n  return children\n}\n\n/*\n * Public sortable object\n * @param {Array|NodeList} sortableElements\n * @param {object|string} options|method\n */\nvar sortable = function (sortableElements, options) {\n  var method = String(options)\n\n  options = (function (options) {\n    var result = {\n      connectWith: false,\n      placeholder: null,\n      disableIEFix: false,\n      placeholderClass: 'sortable-placeholder',\n      draggingClass: 'sortable-dragging',\n      hoverClass: false,\n      debounce: 0,\n      maxItems: 0\n    }\n    for (var option in options) {\n      result[option] = options[option]\n    }\n    return result\n  })(options)\n\n  if (options && typeof options.getChildren === 'function') {\n    _getChildren = options.getChildren\n  }\n\n  if (typeof sortableElements === 'string') {\n    sortableElements = document.querySelectorAll(sortableElements)\n  }\n\n  if (sortableElements instanceof window.Element) {\n    sortableElements = [sortableElements]\n  }\n\n  sortableElements = Array.prototype.slice.call(sortableElements)\n\n  if (/serialize/.test(method)) {\n    var serialized = []\n    sortableElements.forEach(function (sortableElement) {\n      serialized.push({\n        list: sortableElement,\n        children: _serialize(sortableElement)\n      })\n    })\n    return serialized\n  }\n\n  /* TODO: maxstatements should be 25, fix and remove line below */\n  /* jshint maxstatements:false */\n  sortableElements.forEach(function (sortableElement) {\n    if (/enable|disable|destroy/.test(method)) {\n      return sortable[method](sortableElement)\n    }\n\n    // get options & set options on sortable\n    options = _data(sortableElement, 'opts') || options\n    _data(sortableElement, 'opts', options)\n    // reset sortable\n    _reloadSortable(sortableElement)\n    // initialize\n    var items = _filter(_getChildren(sortableElement), options.items)\n    var index\n    var startParent\n    var startList\n    var placeholder = options.placeholder\n    var maxItems\n    if (!placeholder) {\n      placeholder = document.createElement(\n        /^ul|ol$/i.test(sortableElement.tagName) ? 'li' : 'div'\n      )\n    }\n    placeholder = _html2element(placeholder, sortableElement.tagName)\n    placeholder.classList.add.apply(\n      placeholder.classList,\n      options.placeholderClass.split(' ')\n    )\n\n    // setup sortable ids\n    if (!sortableElement.getAttribute('data-sortable-id')) {\n      var id = sortables.length\n      sortables[id] = sortableElement\n      _attr(sortableElement, 'data-sortable-id', id)\n      _attr(items, 'data-item-sortable-id', id)\n    }\n\n    _data(sortableElement, 'items', options.items)\n    placeholders.push(placeholder)\n    if (options.connectWith) {\n      _data(sortableElement, 'connectWith', options.connectWith)\n    }\n\n    _enableSortable(sortableElement)\n    _attr(items, 'role', 'option')\n    _attr(items, 'aria-grabbed', 'false')\n\n    // Mouse over class\n    if (options.hoverClass) {\n      var hoverClass = 'sortable-over'\n      if (typeof options.hoverClass === 'string') {\n        hoverClass = options.hoverClass\n      }\n\n      _on(items, 'mouseenter', function () {\n        this.classList.add(hoverClass)\n      })\n      _on(items, 'mouseleave', function () {\n        this.classList.remove(hoverClass)\n      })\n    }\n\n    // max items\n    if (options.maxItems && typeof options.maxItems === 'number') {\n      maxItems = options.maxItems\n    }\n\n    // Handle drag events on draggable items\n    _on(items, 'dragstart', function (e) {\n      e.stopImmediatePropagation()\n      if ((options.handle && !_matches(e.target, options.handle)) || this.getAttribute('draggable') === 'false') {\n        return\n      }\n\n      // add transparent clone or other ghost to cursor\n      _getGhost(e, this)\n      // cache selsection & add attr for dragging\n      this.classList.add(options.draggingClass)\n      dragging = this\n      _attr(dragging, 'aria-grabbed', 'true')\n      // grab values\n      index = _index(dragging)\n      draggingHeight = parseInt(window.getComputedStyle(dragging).height)\n      startParent = this.parentElement\n      startList = _serialize(startParent)\n      // dispatch sortstart event on each element in group\n      _dispatchEventOnConnected(sortableElement, _makeEvent('sortstart', {\n        item: dragging,\n        placeholder: placeholder,\n        startparent: startParent\n      }))\n    })\n    // Handle drag events on draggable items\n    _on(items, 'dragend', function () {\n      var newParent\n      if (!dragging) {\n        return\n      }\n      // remove dragging attributes and show item\n      dragging.classList.remove(options.draggingClass)\n      _attr(dragging, 'aria-grabbed', 'false')\n      dragging.style.display = dragging.oldDisplay\n      delete dragging.oldDisplay\n\n      placeholders.forEach(_detach)\n      newParent = this.parentElement\n      _dispatchEventOnConnected(sortableElement, _makeEvent('sortstop', {\n        item: dragging,\n        startparent: startParent\n      }))\n      if (index !== _index(dragging) || startParent !== newParent) {\n        _dispatchEventOnConnected(sortableElement, _makeEvent('sortupdate', {\n          item: dragging,\n          index: _filter(_getChildren(newParent), _data(newParent, 'items'))\n              .indexOf(dragging),\n          oldindex: items.indexOf(dragging),\n          elementIndex: _index(dragging),\n          oldElementIndex: index,\n          startparent: startParent,\n          endparent: newParent,\n          newEndList: _serialize(newParent),\n          newStartList: _serialize(startParent),\n          oldStartList: startList\n        }))\n      }\n      dragging = null\n      draggingHeight = null\n    })\n    // Handle drop event on sortable & placeholder\n    // TODO: REMOVE placeholder?????\n    _on([sortableElement, placeholder], 'drop', function (e) {\n      var visiblePlaceholder\n      if (!_listsConnected(sortableElement, dragging.parentElement)) {\n        return\n      }\n\n      e.preventDefault()\n      e.stopPropagation()\n      visiblePlaceholder = placeholders.filter(_attached)[0]\n      _after(visiblePlaceholder, dragging)\n      dragging.dispatchEvent(_makeEvent('dragend'))\n    })\n\n    var debouncedDragOverEnter = _debounce(function (element, pageY) {\n      if (!dragging) {\n        return\n      }\n\n      if (items.indexOf(element) !== -1) {\n        var thisHeight = parseInt(window.getComputedStyle(element).height)\n        var placeholderIndex = _index(placeholder)\n        var thisIndex = _index(element)\n        if (options.forcePlaceholderSize) {\n          placeholder.style.height = draggingHeight + 'px'\n        }\n\n        // Check if `element` is bigger than the draggable. If it is, we have to define a dead zone to prevent flickering\n        if (thisHeight > draggingHeight) {\n          // Dead zone?\n          var deadZone = thisHeight - draggingHeight\n          var offsetTop = _offset(element).top\n          if (placeholderIndex < thisIndex &&\n              pageY < offsetTop + deadZone) {\n            return\n          }\n          if (placeholderIndex > thisIndex &&\n              pageY > offsetTop + thisHeight - deadZone) {\n            return\n          }\n        }\n\n        if (dragging.oldDisplay === undefined) {\n          dragging.oldDisplay = dragging.style.display\n        }\n\n        if (dragging.style.display !== 'none') {\n          dragging.style.display = 'none'\n        }\n\n        if (placeholderIndex < thisIndex) {\n          _after(element, placeholder)\n        } else {\n          _before(element, placeholder)\n        }\n        // Intentionally violated chaining, it is more complex otherwise\n        placeholders\n          .filter(function (element) { return element !== placeholder })\n          .forEach(_detach)\n      } else {\n        if (placeholders.indexOf(element) === -1 &&\n            !_filter(_getChildren(element), options.items).length) {\n          placeholders.forEach(_detach)\n          element.appendChild(placeholder)\n        }\n      }\n    }, options.debounce)\n\n    // Handle dragover and dragenter events on draggable items\n    var onDragOverEnter = function (e) {\n      if (!dragging || !_listsConnected(sortableElement, dragging.parentElement) || _data(sortableElement, '_disabled') === 'true') {\n        return\n      }\n      if (maxItems && _filter(_getChildren(sortableElement), _data(sortableElement, 'items')).length >= maxItems) {\n        return\n      }\n      e.preventDefault()\n      e.stopPropagation()\n      e.dataTransfer.dropEffect = 'move'\n      debouncedDragOverEnter(this, e.pageY)\n    }\n\n    _on(items.concat(sortableElement), 'dragover', onDragOverEnter)\n    _on(items.concat(sortableElement), 'dragenter', onDragOverEnter)\n  })\n\n  return sortableElements\n}\n\nsortable.destroy = function (sortableElement) {\n  _destroySortable(sortableElement)\n}\n\nsortable.enable = function (sortableElement) {\n  _enableSortable(sortableElement)\n}\n\nsortable.disable = function (sortableElement) {\n  _disableSortable(sortableElement)\n}\n\n\nreturn sortable;\n}));\n","import {extend} from \"flarum/extend\";\nimport DiscussionPage from \"flarum/components/DiscussionPage\";\nimport Button from \"flarum/components/Button\";\nimport SplitDropdown from \"flarum/components/SplitDropdown\";\nimport ItemList from \"flarum/utils/ItemList\";\n\nexport default function () {\n\n    // Add a control allowing direct visiting of the board.\n    extend(DiscussionPage.prototype, 'sidebarItems', function (items) {\n        const discussion = this.discussion;\n        let tags = discussion.tags().filter(tag => tag.position() !== null && !tag.isChild());\n\n        let controls = new ItemList;\n\n        tags = tags.filter(tag => tag.canAccessBoard() || tag.canUseBoard() || tag.canManageBoard());\n\n        tags.forEach(tag => {\n            controls.add('board-' + tag.slug(), Button.component({\n                children: app.translator.trans('flagrow-aqueduct.forum.discussion.buttons.show-board', {tag: tag.name()}),\n                icon: 'fab fa-trello',\n                onclick: () => m.route(app.route('flagrow.kanban.board', {tag: tag.slug()}))\n            }));\n        })\n\n        if (tags.length > 0) {\n            items.add(\n                'board',\n                SplitDropdown.component({\n                    children: controls.toArray(),\n                    icon: 'fab fa-trello',\n                    className: 'App-primaryControl',\n                    buttonClassName: 'Button--secondary'\n                }),\n                -50\n            );\n        }\n    });\n}\n","import Component from 'flarum/Component';\nimport ItemList from 'flarum/utils/ItemList';\nimport icon from 'flarum/helpers/icon';\nimport avatar from 'flarum/helpers/avatar';\n\nexport default class Card extends Component {\n    init() {\n        this.discussion = this.props.discussion;\n        this.isUnread = this.discussion.isUnread();\n    }\n\n    view() {\n        const jumpTo = Math.min(this.discussion.lastPostNumber(), (this.discussion.lastReadPostNumber() || 0) + 1);\n\n        return m('div', {\n            className: 'Card' + (this.isUnread ? ' Unread' : ''),\n            discussion: this.discussion.id()\n        }, m('div', {className: 'Card--Handle'}, [\n            m('div', {className: 'Card--Header'}, [\n                // Issue title.\n                m('div', {className: 'Card--Title'},\n                    <a href={app.route.discussion(this.discussion, jumpTo)}\n                       config={m.route}>\n                        {this.discussion.title()}\n                    </a>\n                )\n            ]),\n            m('div', {className: 'Card--Footer'}, this.footerControls().toArray())\n        ]))\n    }\n\n    footerControls() {\n        let items = new ItemList;\n\n        const user = this.discussion.user();\n\n        console.log(this.discussion)\n\n        items.add('user',\n            <a href={user ? app.route.user(user) : '#'}\n              className=\"Card--Author\"\n              config={function(element) {\n                  $(element).tooltip({placement: 'right'});\n                  m.route.apply(this, arguments);\n              }}>\n            {avatar(user, {title: ''})}\n        </a>);\n\n        items.add('count', m('div', {className: 'Card--Replies-Count'}, [\n            icon(this.isUnread ? 'commenting-o' : 'comment-o'),\n            this.discussion[this.isUnread ? 'unreadCount' : 'replyCount']()\n        ]));\n\n        return items;\n    }\n}\n","import routes from './routes';\nimport addsBoardToDiscussion from './addsBoardToDiscussion';\n\nimport Model from 'flarum/Model';\nimport Tag from 'flarum/tags/models/Tag';\nimport Discussion from 'flarum/models/Discussion';\n\napp.initializers.add('flagrow-aqueduct', function(app) {\n    Tag.prototype.canAccessBoard = Model.attribute('canAccessBoard');\n    Tag.prototype.canUseBoard = Model.attribute('canUseBoard');\n    Tag.prototype.canManageBoard = Model.attribute('canManageBoard');\n    Tag.prototype.columns = Model.hasMany('columns');\n    Tag.prototype.boardSort = Model.attribute('boardSort') || null;\n    Tag.prototype.boardMaxItems = Model.attribute('boardMaxItems') || null;\n\n    Discussion.prototype.canAccessBoard = Model.attribute('canAccessBoard');\n    Discussion.prototype.canUseBoard = Model.attribute('canUseBoard');\n    Discussion.prototype.canManageBoard = Model.attribute('canManageBoard');\n    Discussion.prototype.assignedUsers = Model.hasMany('assignedUsers');\n    Discussion.prototype.assignedGroups = Model.hasMany('assignedGroups');\n\n    routes(app);\n\n    addsBoardToDiscussion();\n});\n","import Modal from 'flarum/components/Modal';\nimport tagLabel from 'flarum/tags/helpers/tagLabel';\nimport tagIcon from 'flarum/tags/helpers/tagIcon';\nimport highlight from 'flarum/helpers/highlight';\nimport classList from 'flarum/utils/classList';\nimport Button from \"flarum/components/Button\";\n\nexport default class AddColumnModal extends Modal {\n\n    title() {\n        return app.translator.trans('flagrow-aqueduct.forum.board.modals.add-column.title');\n    }\n    init() {\n        super.init();\n        this.for = this.props.tag;\n\n        this.tags = app.store.all('tags').filter(tag => {\n            return this.for.columns().indexOf(tag) == -1;\n        });\n\n        this.selected = m.prop('');\n        this.filter = m.prop('');\n        this.index = this.tags[0].id();\n        this.focused = false;\n    }\n\n    content() {\n        let tags = this.tags;\n        const filter = this.filter().toLowerCase();\n\n        tags = tags.filter(tag => {\n            return tag.id() != this.for.id() &&\n                (tag.position() === null || (tag.parent() && tag.parent().id() == this.for.id()));\n        })\n\n        // If the user has entered text in the filter input, then filter by tags\n        // whose name matches what they've entered.\n        if (filter) {\n            tags = tags.filter(tag => tag.name().substr(0, filter.length).toLowerCase() === filter);\n        }\n\n        return [\n          <div className=\"Modal-body\">\n            <div className=\"TagDiscussionModal-form\">\n              <div className=\"TagDiscussionModal-form-input\">\n                <div className={'TagsInput FormControl ' + (this.focused ? 'focus' : '')}>\n                  <span className=\"TagsInput-selected\">\n                    {this.selected() ?\n                            <span className=\"TagsInput-tag\" onclick={() => {\n                            this.selected('')\n                            this.onready();\n                          }}>\n                            {tagLabel(this.selected())}\n                          </span>\n                        : ''\n                    }\n                  </span>\n                  <input className=\"FormControl\"\n                    value={this.filter()}\n                    oninput={m.withAttr('value', this.filter)}\n                    onfocus={() => this.focused = true}\n                    onblur={() => this.focused = false}/>\n                </div>\n              </div>\n              <div className=\"TagDiscussionModal-form-submit App-primaryControl\">\n                {Button.component({\n                  type: 'submit',\n                  className: 'Button Button--primary',\n                  disabled: !this.selected(),\n                  icon: 'check',\n                  children: app.translator.trans('flarum-tags.forum.choose_tags.submit_button')\n                })}\n              </div>\n            </div>\n          </div>,\n\n          <div className=\"Modal-footer\">\n            <ul className=\"TagDiscussionModal-list SelectTagList\">\n              {tags\n                .filter(tag => filter || !tag.parent() || this.selected().id == tag.id())\n                .map(tag => (\n                  <li data-index={tag.id()}\n                    className={classList({\n                      pinned: tag.position() !== null,\n                      child: !!tag.parent(),\n                      colored: !!tag.color(),\n                      selected: this.selected() && this.selected().id == tag.id(),\n                      active: this.index === tag\n                    })}\n                    style={{color: tag.color()}}\n                    onmouseover={() => this.index = tag}\n                    onclick={() => this.selected(tag)}\n                  >\n                    {tagIcon(tag)}\n                    <span className=\"SelectTagListItem-name\">\n                      {highlight(tag.name(), filter)}\n                    </span>\n                    {tag.description()\n                      ? (\n                        <span className=\"SelectTagListItem-description\">\n                          {tag.description()}\n                        </span>\n                      ) : ''}\n                  </li>\n                ))}\n            </ul>\n          </div>\n        ];\n    }\n\n    className() {\n        return 'AddColumnModal';\n    }\n\n\n    onsubmit(e) {\n        e.preventDefault();\n\n        const board = this.for;\n        const column = this.selected();\n\n        app.request({\n            method: 'POST',\n            url: app.forum.attribute('apiUrl') + '/board/' + board.slug() + '/columns/' + column.slug(),\n        }).then(results => {\n            let tag = app.store.pushPayload(results);\n\n            if (this.props.onsubmit) this.props.onsubmit(tag);\n\n            app.modal.close();\n\n            m.redraw.strategy('none');\n        });\n    }\n}\n","import sortable from 'html5sortable';\n\nimport {extend} from \"flarum/extend\";\nimport Page from \"flarum/components/Page\";\nimport SplitDropdown from 'flarum/components/SplitDropdown';\nimport Button from 'flarum/components/Button';\nimport ItemList from 'flarum/utils/ItemList';\nimport AddColumnModal from '../modals/AddColumnModal';\nimport Card from '../components/Card';\n\nexport default class Board extends Page {\n    init() {\n        super.init();\n\n        this.bodyClass = 'Kanban--Board';\n\n        this.draggable = 'cards';\n        this.dragging = null;\n\n        this.refresh(true);\n    }\n\n\n    config(isInitialized, context) {\n        super.config(...arguments);\n\n        if (isInitialized) return;\n\n        app.setTitle('');\n        app.setTitleCount(0);\n\n        if (this.tag)\n\n        if (this.tag.canUseBoard() || this.tag.canManageBoard()) {\n            this.setDraggable();\n        }\n    }\n\n    view() {\n        return m('div', {\n            className: 'Board'\n        }, [\n            m('div', {\n                className: 'Board--Controls'\n            }, m('div', {className: 'container'}, [\n                this.controls().isEmpty() ? [] :\n                    SplitDropdown.component({\n                        children: this.controls().toArray(),\n                        icon: 'ellipsis-v',\n                        className: 'App-primaryControl',\n                        buttonClassName: 'Button--primary'\n                    })\n            ])),\n            m('div', {\n                className: 'Board--List'\n            }, this.tags.map(tag => {\n                return this.column(tag);\n            }))\n        ])\n    }\n\n    controls() {\n        let items = new ItemList;\n        let tag = this.tag;\n\n        if (tag.canManageBoard()) {\n            items.add('add-column', Button.component({\n                icon: 'fas fa-cog',\n                children: app.translator.trans('flagrow-aqueduct.forum.board.buttons.add-column'),\n                onclick: () => app.modal.show(new AddColumnModal({\n                    tag: tag,\n                    onsubmit: () => {\n                        this.refresh(true)\n                    }\n                }))\n            }));\n\n            if (this.draggable === 'cards') {\n                items.add('drag-columns', Button.component({\n                    icon: 'fas fa-lock-open',\n                    children: app.translator.trans('flagrow-aqueduct.forum.board.buttons.drag-columns'),\n                    onclick: () => {\n                        this.draggable = 'columns';\n                        this.setDraggable();\n                    }\n                }));\n            } else if (this.dragging && this.draggable === 'columns') {\n                items.add('drag-columns', Button.component({\n                    icon: 'fas fa-lock',\n                    children: app.translator.trans('flagrow-aqueduct.forum.board.buttons.fix-columns'),\n                    onclick: () => {\n                        this.draggable = 'cards';\n                        this.setDraggable();\n                    }\n                }));\n            }\n        }\n\n        return items;\n    }\n\n    column(tag) {\n        return m('div', {\n            className: 'Board--Column ' + tag.name(),\n            slug: tag.slug()\n        }, [\n            m('div', {className: 'Board--Inner'}, [\n                m('header', {\n                    className: 'Board--Header' + (tag.color() ? ' colored' : ''),\n                    style: tag.color() ? 'border-top-color: ' + tag.color() + ';' : ''\n                }, m('h4', [tag.name(), m('span', tag.description())])),\n                m('div', {\n                    className: 'Board--Item-List',\n                    slug: tag.slug()\n                }, this.loading || this.discussions[tag.slug()].length == 0 ? '' : this.discussions[tag.slug()].map(discussion => {\n                    return Card.component({discussion});\n                }))\n            ])\n        ]);\n    }\n\n    /**\n     * Clear and reload the discussion list.\n     *\n     * @public\n     */\n    refresh(clear = true) {\n        if (clear) {\n            this.loading = true;\n\n            // The primary tag for which we will show the board.\n            this.tag = app.store.getBy('tags', 'slug', m.route.param('tag'));\n\n            /**\n             * The discussions in the discussion list.\n             *\n             * @type {Discussion[]}\n             */\n            this.discussions = {};\n\n            this.tags = this.tag.columns() || [];\n        }\n\n        this.tags.sort((a, b) => {\n            return a.boardSort() - b.boardSort();\n        });\n\n        this.load().then(\n            results => {\n                app.store.pushPayload(results);\n\n                this.discussions = {};\n                this.parseResults(results.data);\n\n                this.setDraggable()\n            },\n            () => {\n                this.loading = false;\n                m.redraw();\n\n                this.setDraggable()\n            }\n        );\n    }\n\n    /**\n     * Parse results and append them to the discussion list.\n     *\n     * @param {Discussion[]} results\n     * @return {Discussion[]}\n     */\n    parseResults(results) {\n        this.tags.forEach(tag => {\n\n            this.discussions[tag.slug()] = [];\n\n            results.forEach(discussion => {\n                discussion = app.store.getById(discussion.type, discussion.id);\n\n                if (discussion.tags().map(tag => tag.id()).indexOf(tag.id()) != -1) {\n                    this.discussions[tag.slug()].push(discussion);\n                }\n            });\n        })\n\n        this.loading = false;\n\n        m.lazyRedraw();\n\n        return results;\n    }\n\n    /**\n     * Load discussions based on the tags.\n     */\n    load() {\n        return app.request({\n            method: 'get',\n            url: app.forum.attribute('apiUrl') + '/board/' + this.tag.slug(),\n        });\n    }\n\n    /**\n     * Listens to dragging event and updates the sorting of the columns.\n     */\n    setDraggable() {\n        let sorted = [];\n\n        if (this.dragging === null && this.draggable === 'cards') {\n            sorted = sortable('.Board--Item-List', {\n                connectWith: 'Board--Connected--Cards',\n                items: '.Card',\n                // handle: '.Card--Header',\n                placeholder: '<div class=\"Card Placeholder\"></div>',\n                forcePlaceholderSize: true\n            });\n\n            if (sorted.length > 0) {\n                sorted.forEach((sort) => {\n                    sort.addEventListener('sortupdate', (e) => {\n                        const tag = $(e.target).attr('slug');\n                        // prevents updating multiple times\n                        if (tag === $(e.detail.endparent).attr('slug')) {\n                            const sorting = $(e.target).find('.Card').map(function () {\n                                return $(this).attr('discussion');\n                            }).get();\n\n                            this.updateDiscussionSorting(sorting, tag);\n                        }\n                    });\n                });\n            }\n        } else if (this.draggable === 'cards') {\n            sortable('.Board--Item-List');\n        }\n\n        if (this.dragging === null && this.draggable === 'columns') {\n            sorted = sortable('.Board--List', {\n                items: '.Board--Column',\n                handle: '.Board--Header',\n                placeholder: '<div class=\"Board--Column Placeholder\"></div>',\n                forcePlaceholderSize: true\n            });\n\n            if (sorted.length > 0) {\n                sorted[0].addEventListener('sortupdate', (e) => {\n                    const sorting = $(e.target).find('.Board--Column').map(function () {\n                        return $(this).attr('slug');\n                    }).get();\n\n                    this.updateColumnSorting(sorting);\n                });\n            }\n        } else if (this.draggable === 'columns') {\n            sortable('.Board--List');\n        }\n\n        this.dragging = (this.dragging === null && sorted.length > 0) || (this.dragging !== null && true);\n    }\n\n    updateColumnSorting(sorting) {\n        return app.request({\n            method: 'post',\n            url: app.forum.attribute('apiUrl') + '/board/' + this.tag.slug() + '/sorting',\n            data: sorting\n        }).then(results => {\n            app.store.pushPayload(results);\n            m.redraw()\n\n            this.setDraggable()\n        })\n    }\n\n    updateDiscussionSorting(sorting, slug) {\n        const tag = app.store.getBy('tags', 'slug', slug);\n\n        if (sorting.length > 0) {\n            sorting.forEach(id => {\n                const discussion = app.store.getById('discussions', id);\n                const tags = discussion.tags();\n\n                const data = {\n                    relationships: {\n                        tags: []\n                    }\n                }\n\n                // drop all tags from discussion that are part of this board as column\n                tags.forEach(t => {\n                    if (this.tags.indexOf(t) < 0 && t.id() !== tag.id()) {\n                        data.relationships.tags.push(t);\n                    }\n                })\n\n                // then re-add that tag so it can be saved\n                data.relationships.tags.push(tag);\n\n                discussion.save(data);\n            })\n        }\n    }\n}\n","import Board from './pages/Board';\n\nexport default function (app) {\n    app.routes['flagrow.kanban.board'] = {path: '/board/:tag', component: Board.component()};\n}\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/DiscussionPage'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/SplitDropdown'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/highlight'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = flarum.core.compat['tags/helpers/tagIcon'];","module.exports = flarum.core.compat['tags/helpers/tagLabel'];","module.exports = flarum.core.compat['tags/models/Tag'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/classList'];"],"sourceRoot":""}