{"version":3,"sources":["webpack://@flagrow/aqueduct/webpack/bootstrap","webpack://@flagrow/aqueduct/./forum.js","webpack://@flagrow/aqueduct/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flagrow/aqueduct/./src/forum/addsBoardToDiscussion.js","webpack://@flagrow/aqueduct/./src/forum/components/Card.js","webpack://@flagrow/aqueduct/./src/forum/index.js","webpack://@flagrow/aqueduct/./src/forum/labels/assigneeLabel.js","webpack://@flagrow/aqueduct/./src/forum/labels/assigneesLabel.js","webpack://@flagrow/aqueduct/./src/forum/modals/AddAssigneeModal.js","webpack://@flagrow/aqueduct/./src/forum/modals/AddColumnModal.js","webpack://@flagrow/aqueduct/./src/forum/pages/Board.js","webpack://@flagrow/aqueduct/./src/forum/routes.js","webpack://@flagrow/aqueduct/./src/forum/search/MultiSelectionInput.js","webpack://@flagrow/aqueduct/./src/forum/search/sources/GroupSearchSource.js","webpack://@flagrow/aqueduct/./src/forum/search/sources/UserSearchSource.js","webpack://@flagrow/aqueduct/external \"flarum.core.compat['Component']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['Model']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['components/Button']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['components/DiscussionHero']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['components/DiscussionPage']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['components/Modal']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['components/Page']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['components/Search']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['components/SplitDropdown']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['components/Switch']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['extend']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['helpers/avatar']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['helpers/highlight']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['helpers/icon']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['helpers/username']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['models/Discussion']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['models/Group']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['models/User']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['tags/helpers/tagIcon']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['tags/helpers/tagLabel']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['tags/models/Tag']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['utils/ItemList']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['utils/classList']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['utils/extract']\"","webpack://@flagrow/aqueduct/external \"flarum.core.compat['utils/extractText']\""],"names":["extend","DiscussionPage","prototype","items","discussion","tags","filter","tag","position","isChild","controls","ItemList","forEach","add","slug","Button","component","children","app","translator","trans","name","icon","onclick","m","route","length","canManageBoard","modal","show","AddAssigneeModal","SplitDropdown","toArray","className","buttonClassName","DiscussionHero","props","users","assignedUsers","map","user","avatar","groups","assignedGroups","group","assignees","assigneesLabel","Card","init","isUnread","view","jumpTo","Math","min","lastPostNumber","readNumber","id","title","footerControls","startUser","element","$","tooltip","placement","apply","arguments","Component","initializers","Tag","Model","attribute","canUseBoard","columns","hasMany","boardSort","boardMaxItems","Discussion","canViewBoard","routes","addsBoardToDiscussion","assigneeLabel","recipient","attrs","style","link","extract","label","User","username","href","config","Group","namePlural","assignee","push","selected","prop","assignInitialRecipients","merge","recipientSearch","MultiSelectionInput","content","type","disabled","select","e","metaKey","ctrlKey","indexOf","index","submit","onsubmit","preventDefault","recipients","recipientGroups","recipientUsers","save","relationships","then","current","stream","update","redraw","close","strategy","Modal","AddColumnModal","for","store","all","focused","toLowerCase","parent","substr","onready","tagLabel","withAttr","classList","pinned","child","colored","color","active","tagIcon","highlight","description","board","column","request","method","url","forum","results","pushPayload","Board","bodyClass","draggable","dragging","refresh","isInitialized","context","setTitle","setTitleCount","setDraggable","loading","discussions","clear","getBy","param","sort","a","b","load","parseResults","data","getById","lazyRedraw","sortable","handle","placeholder","forcePlaceholderSize","addEventListener","sorting","target","find","attr","get","updateColumnSorting","Page","path","$search","on","addSelection","focus","parentNode","generateLabel","selection","value","removeSelection","open","loadingSources","extractText","oninput","onfocus","hasFocus","onblur","sources","source","LoadingIndicator","size","sourceItems","UserSearchSource","GroupSearchSource","values","split","findRecipient","remove","Search","search","query","q","page","limit","groupName"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import {extend} from \"flarum/extend\";\nimport DiscussionPage from \"flarum/components/DiscussionPage\";\nimport Button from \"flarum/components/Button\";\nimport SplitDropdown from \"flarum/components/SplitDropdown\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport avatar from \"flarum/helpers/avatar\";\nimport icon from \"flarum/helpers/icon\";\nimport DiscussionHero from \"flarum/components/DiscussionHero\";\nimport assigneesLabel from \"./labels/assigneesLabel\";\nimport AddAssigneeModal from \"./modals/AddAssigneeModal\";\n\nexport default function () {\n\n    // Add a control allowing direct visiting of the board.\n    extend(DiscussionPage.prototype, 'sidebarItems', function (items) {\n        const discussion = this.discussion;\n        let tags = discussion.tags().filter(tag => tag.position() !== null && !tag.isChild());\n\n        let controls = new ItemList;\n\n        tags.forEach(tag => {\n            controls.add('board-' + tag.slug(), Button.component({\n                children: app.translator.trans('flagrow-aqueduct.forum.discussion.buttons.show-board', {tag: tag.name()}),\n                icon: 'trello',\n                onclick: () => m.route(app.route('flagrow.aqueduct.board', {tag: tag.slug()}))\n            }));\n        })\n\n        if (tags.length > 0) {\n            if (discussion.canManageBoard()) {\n                controls.add('assignee', Button.component({\n                    children: app.translator.trans('flagrow-aqueduct.forum.discussion.buttons.set-assignees'),\n                    icon: 'user-circle-o',\n                    onclick: () => app.modal.show(new AddAssigneeModal({discussion}))\n                }));\n            }\n\n            items.add(\n                'board',\n                SplitDropdown.component({\n                    children: controls.toArray(),\n                    icon: 'trello',\n                    className: 'App-primaryControl',\n                    buttonClassName: 'Button--secondary'\n                }),\n                -50\n            );\n        }\n    });\n    /**\n     *\n     * Adds User labels on the discussion Hero.\n     */\n    extend(DiscussionHero.prototype, 'items', function(items) {\n        const discussion = this.props.discussion;\n\n        let users = discussion.assignedUsers().map(user => {\n            return avatar(user);\n        });\n        let groups = discussion.assignedGroups().map(group => {\n            return icon(group.icon());\n        });\n\n        const assignees = users + groups;\n\n        if (assignees.length > 0) {\n            items.add('assignees', assigneesLabel(assignees), 3);\n        }\n    });\n}\n","import Component from 'flarum/Component';\nimport ItemList from 'flarum/utils/ItemList';\nimport icon from 'flarum/helpers/icon';\nimport avatar from 'flarum/helpers/avatar';\n\nexport default class Card extends Component {\n    init() {\n        this.discussion = this.props.discussion;\n        this.isUnread = this.discussion.isUnread();\n    }\n\n    view() {\n        const jumpTo = Math.min(this.discussion.lastPostNumber(), (this.discussion.readNumber() || 0) + 1);\n\n        return m('li', {\n            className: 'Card' + (this.isUnread ? ' Unread' : ''),\n            discussion: this.discussion.id()\n        }, m('div', {className: 'Card--Handle'}, [\n            m('div', {className: 'Card--Header'}, [\n                // Issue title.\n                m('div', {className: 'Card--Title'},\n                    <a href={app.route.discussion(this.discussion, jumpTo)}\n                       config={m.route}>\n                        {this.discussion.title()}\n                    </a>\n                )\n            ]),\n            m('div', {className: 'Card--Footer'}, this.footerControls().toArray())\n        ]))\n    }\n\n    footerControls() {\n        let items = new ItemList;\n\n        const startUser = this.discussion.startUser();\n\n        items.add('startUser',\n            <a href={startUser ? app.route.user(startUser) : '#'}\n              className=\"Card--Author\"\n              config={function(element) {\n                  $(element).tooltip({placement: 'right'});\n                  m.route.apply(this, arguments);\n              }}>\n            {avatar(startUser, {title: ''})}\n        </a>);\n\n        items.add('count', m('div', {className: 'Card--Replies-Count'}, [\n            icon(this.isUnread ? 'commenting-o' : 'comment-o'),\n            this.discussion[this.isUnread ? 'unreadCount' : 'repliesCount']()\n        ]));\n\n        return items;\n    }\n}\n","import {extend} from 'flarum/extend';\n\nimport routes from './routes';\nimport addsBoardToDiscussion from './addsBoardToDiscussion';\n\nimport Model from 'flarum/Model';\nimport Tag from 'flarum/tags/models/Tag';\nimport Discussion from 'flarum/models/Discussion';\n\napp.initializers.add('flagrow-aqueduct', function(app) {\n    Tag.prototype.canManageBoard = Model.attribute('canManageBoard');\n    Tag.prototype.canUseBoard = Model.attribute('canUseBoard');\n    Tag.prototype.columns = Model.hasMany('columns');\n    Tag.prototype.boardSort = Model.attribute('boardSort') || null;\n    Tag.prototype.boardMaxItems = Model.attribute('boardMaxItems') || null;\n\n    Discussion.prototype.canViewBoard = Model.hasMany('canViewBoard');\n    Discussion.prototype.canUseBoard = Model.hasMany('canUseBoard');\n    Discussion.prototype.canManageBoard = Model.attribute('canManageBoard');\n    Discussion.prototype.assignedUsers = Model.hasMany('assignedUsers');\n    Discussion.prototype.assignedGroups = Model.hasMany('assignedGroups');\n\n    routes(app);\n\n    addsBoardToDiscussion();\n});\n","import extract from 'flarum/utils/extract';\nimport username from 'flarum/helpers/username';\nimport User from 'flarum/models/User';\nimport Group from 'flarum/models/Group';\n\nexport default function assigneeLabel(recipient, attrs = {}) {\n    attrs.style = attrs.style || {};\n    attrs.className = 'RecipientLabel ' + (attrs.className || '');\n\n    const link = extract(attrs, 'link');\n\n    var label;\n\n    if (recipient instanceof User) {\n        label = username(recipient);\n\n        if (link) {\n            attrs.title = recipient.username() || '';\n            attrs.href = app.route.user(recipient);\n            attrs.config = m.route;\n        }\n    } else if (recipient instanceof Group) {\n        label = recipient.namePlural();\n    }\n\n    return (\n        m((link ? 'a' : 'span'), attrs,\n            <span className=\"RecipientLabel-text\">\n            {label}\n        </span>\n        )\n    );\n}\n","import extract from 'flarum/utils/extract';\nimport assigneeLabel from './assigneeLabel';\n\nexport default function assigneesLabel(assignees, attrs = {}) {\n    const children = [];\n    const link = extract(attrs, 'link');\n\n    attrs.className = 'AssigneesLabel ' + (attrs.className || '');\n\n    if (assignees) {\n        assignees.forEach(assignee => {\n            children.push(assigneeLabel(assignee, {link}));\n        });\n    } else {\n        children.push(assigneeLabel());\n    }\n\n    return <span {...attrs}>{children}</span>;\n}\n","import Modal from \"flarum/components/Modal\";\nimport DiscussionPage from \"flarum/components/DiscussionPage\";\nimport Button from \"flarum/components/Button\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport MultiSelectionInput from \"../search/MultiSelectionInput\";\nimport User from \"flarum/models/User\";\nimport Group from \"flarum/models/Group\";\n\nexport default class AddAssigneeModal extends Modal {\n    init() {\n        super.init();\n\n        this.selected = m.prop(new ItemList);\n\n        if (this.props.discussion) {\n            // Adds recipients of the currently viewed discussion.\n            this.assignInitialRecipients(this.props.discussion);\n        } else if (this.props.assignees) {\n            // Adds previously selected recipients.\n            this.selected().merge(this.props.assignees);\n        }\n\n        this.recipientSearch = MultiSelectionInput.component({\n            selected: this.selected,\n            discussion: this.props.discussion\n        });\n    }\n\n    assignInitialRecipients(discussion) {\n        discussion.assignedUsers().map(user => {\n            this.selected().add(\"users:\" + user.id(), user);\n        });\n        discussion.assignedGroups().map(group => {\n            this.selected().add(\"groups:\" + group.id(), group);\n        });\n    }\n\n    className() {\n        return 'AddAssigneeModal';\n    }\n\n    title() {\n        return this.props.discussion\n            ? app.translator.trans('flagrow-aqueduct.forum.modal.titles.update_recipients', {title: <em>{this.props.discussion.title()}</em>})\n            : app.translator.trans('flagrow-aqueduct.forum.modal.titles.add_recipients');\n    }\n\n    content() {\n        return [\n            <div className=\"Modal-body\">\n                <div className=\"AddAssigneeModal-form\">\n                    {this.recipientSearch}\n                    <div className=\"AddAssigneeModal-form-submit App-primaryControl\">\n                        {Button.component({\n                            type: 'submit',\n                            className: 'Button Button--primary',\n                            disabled: false,\n                            icon: 'check',\n                            children: app.translator.trans('flagrow-aqueduct.forum.buttons.submit')\n                        })}\n                    </div>\n                </div>\n            </div>\n        ];\n    }\n\n    select(e) {\n        // Ctrl + Enter submits the selection, just Enter completes the current entry\n        if (e.metaKey || e.ctrlKey || this.selected.indexOf(this.index) !== -1) {\n            if (this.selected().length) {\n                this.$('form').submit();\n            }\n        }\n    }\n\n    onsubmit(e) {\n        e.preventDefault();\n\n        const discussion = this.props.discussion;\n        const recipients = this.selected();\n\n        var recipientGroups = [];\n        var recipientUsers = [];\n\n        recipients.toArray().forEach(recipient => {\n\n            if (recipient instanceof User) {\n                recipientUsers.push(recipient);\n            }\n\n            if (recipient instanceof Group) {\n                recipientGroups.push(recipient);\n            }\n        });\n\n        if (discussion) {\n            discussion.save({relationships: {recipientUsers, recipientGroups}})\n                .then(() => {\n                    if (app.current instanceof DiscussionPage) {\n                        app.current.stream.update();\n                    }\n                    m.redraw();\n                });\n        }\n\n        if (this.props.onsubmit) this.props.onsubmit(recipients, recipientUsers, recipientGroups);\n\n        app.modal.close();\n\n        m.redraw.strategy('none');\n    }\n}\n","import Modal from 'flarum/components/Modal';\nimport tagLabel from 'flarum/tags/helpers/tagLabel';\nimport tagIcon from 'flarum/tags/helpers/tagIcon';\nimport highlight from 'flarum/helpers/highlight';\nimport classList from 'flarum/utils/classList';\nimport Button from \"flarum/components/Button\";\n\nexport default class AddColumnModal extends Modal {\n\n    title() {\n        return app.translator.trans('flagrow-aqueduct.forum.board.modals.add-column.title');\n    }\n    init() {\n        super.init();\n        this.for = this.props.tag;\n\n        this.tags = app.store.all('tags').filter(tag => {\n            return this.for.columns().indexOf(tag) == -1;\n        });\n\n        this.selected = m.prop('');\n        this.filter = m.prop('');\n        this.index = this.tags[0].id();\n        this.focused = false;\n    }\n\n    content() {\n        let tags = this.tags;\n        const filter = this.filter().toLowerCase();\n\n        tags = tags.filter(tag => {\n            return tag.id() != this.for.id() &&\n                (tag.position() === null || (tag.parent() && tag.parent().id() == this.for.id()));\n        })\n\n        // If the user has entered text in the filter input, then filter by tags\n        // whose name matches what they've entered.\n        if (filter) {\n            tags = tags.filter(tag => tag.name().substr(0, filter.length).toLowerCase() === filter);\n        }\n\n        return [\n          <div className=\"Modal-body\">\n            <div className=\"TagDiscussionModal-form\">\n              <div className=\"TagDiscussionModal-form-input\">\n                <div className={'TagsInput FormControl ' + (this.focused ? 'focus' : '')}>\n                  <span className=\"TagsInput-selected\">\n                    {this.selected() ?\n                            <span className=\"TagsInput-tag\" onclick={() => {\n                            this.selected('')\n                            this.onready();\n                          }}>\n                            {tagLabel(this.selected())}\n                          </span>\n                        : ''\n                    }\n                  </span>\n                  <input className=\"FormControl\"\n                    value={this.filter()}\n                    oninput={m.withAttr('value', this.filter)}\n                    onfocus={() => this.focused = true}\n                    onblur={() => this.focused = false}/>\n                </div>\n              </div>\n              <div className=\"TagDiscussionModal-form-submit App-primaryControl\">\n                {Button.component({\n                  type: 'submit',\n                  className: 'Button Button--primary',\n                  disabled: !this.selected(),\n                  icon: 'check',\n                  children: app.translator.trans('flarum-tags.forum.choose_tags.submit_button')\n                })}\n              </div>\n            </div>\n          </div>,\n\n          <div className=\"Modal-footer\">\n            <ul className=\"TagDiscussionModal-list SelectTagList\">\n              {tags\n                .filter(tag => filter || !tag.parent() || this.selected().id == tag.id())\n                .map(tag => (\n                  <li data-index={tag.id()}\n                    className={classList({\n                      pinned: tag.position() !== null,\n                      child: !!tag.parent(),\n                      colored: !!tag.color(),\n                      selected: this.selected() && this.selected().id == tag.id(),\n                      active: this.index === tag\n                    })}\n                    style={{color: tag.color()}}\n                    onmouseover={() => this.index = tag}\n                    onclick={() => this.selected(tag)}\n                  >\n                    {tagIcon(tag)}\n                    <span className=\"SelectTagListItem-name\">\n                      {highlight(tag.name(), filter)}\n                    </span>\n                    {tag.description()\n                      ? (\n                        <span className=\"SelectTagListItem-description\">\n                          {tag.description()}\n                        </span>\n                      ) : ''}\n                  </li>\n                ))}\n            </ul>\n          </div>\n        ];\n    }\n\n    className() {\n        return 'AddColumnModal';\n    }\n\n\n    onsubmit(e) {\n        e.preventDefault();\n\n        const board = this.for;\n        const column = this.selected();\n\n        app.request({\n            method: 'POST',\n            url: app.forum.attribute('apiUrl') + '/board/' + board.slug() + '/columns/' + column.slug(),\n        }).then(results => {\n            let tag = app.store.pushPayload(results);\n\n            if (this.props.onsubmit) this.props.onsubmit(tag);\n\n            app.modal.close();\n\n            m.redraw.strategy('none');\n        });\n    }\n}\n","import {extend} from \"flarum/extend\";\nimport Page from \"flarum/components/Page\";\nimport SplitDropdown from 'flarum/components/SplitDropdown';\nimport Button from 'flarum/components/Button';\nimport ItemList from 'flarum/utils/ItemList';\nimport Switch from 'flarum/components/Switch';\nimport AddColumnModal from '../modals/AddColumnModal';\nimport Card from '../components/Card';\n\nexport default class Board extends Page {\n    init() {\n        super.init();\n\n        this.bodyClass = 'Aqueduct--Board';\n\n        this.draggable = 'cards';\n        this.dragging = null;\n\n        this.refresh(true);\n    }\n\n\n\n    config(isInitialized, context) {\n        super.config(...arguments);\n\n        if (isInitialized) return;\n\n        app.setTitle('');\n        app.setTitleCount(0);\n\n        if (this.tag.canManageBoard()) {\n            this.setDraggable();\n        }\n    }\n\n    view() {\n        return m('div', {\n            className: 'Board'\n        }, [\n            m('div', {\n                className: 'Board--Controls'\n            }, m('div', {className: 'container'}, [\n                SplitDropdown.component({\n                    children: this.controls().toArray(),\n                    icon: 'ellipsis-v',\n                    className: 'App-primaryControl',\n                    buttonClassName: 'Button--primary'\n                })\n            ])),\n            m('div', {\n                className: 'Board--List'\n            }, this.tags.map(tag => {\n                return this.column(tag);\n            }))\n        ])\n    }\n\n    controls() {\n        let items = new ItemList;\n        let tag = this.tag;\n\n        if (tag.canManageBoard()) {\n            items.add('add-column', Button.component({\n                icon: 'gear',\n                children: app.translator.trans('flagrow-aqueduct.forum.board.buttons.add-column'),\n                onclick: () => app.modal.show(new AddColumnModal({\n                    tag: tag,\n                    onsubmit: tag => {\n                        this.refresh(true)\n                    }\n                }))\n            }))\n        }\n\n        return items;\n    }\n\n    column(tag) {\n        return m('div', {\n            className: 'Board--Column ' + tag.name(),\n            slug: tag.slug()\n        }, [\n            m('div', {className: 'Board--Inner'}, [\n                m('header', {\n                    className: 'Board--Header' + (tag.color() ? ' colored' : ''),\n                    style: tag.color() ? 'border-top-color: ' + tag.color() + ';' : ''\n                }, m('h4', [tag.name(), m('span', tag.description())])),\n                m('div', {\n                    className: 'Board--Item-List'\n                }, this.loading || this.discussions[tag.slug()].length == 0 ? '' : m('ul', this.discussions[tag.slug()].map(discussion => {\n                    return Card.component({discussion});\n                })))\n            ])\n        ]);\n    }\n\n    /**\n     * Clear and reload the discussion list.\n     *\n     * @public\n     */\n    refresh(clear = true) {\n        if (clear) {\n            this.loading = true;\n\n            // The primary tag for which we will show the board.\n            this.tag = app.store.getBy('tags', 'slug', m.route.param('tag'));\n\n            /**\n             * The discussions in the discussion list.\n             *\n             * @type {Discussion[]}\n             */\n            this.discussions = {};\n\n            this.tags = this.tag.columns() || [];\n        }\n\n        this.tags.sort((a,b) => {\n            return a.boardSort() - b.boardSort();\n        });\n\n        this.load().then(\n            results => {\n                app.store.pushPayload(results);\n\n                this.discussions = {};\n                this.parseResults(results.data);\n\n                this.setDraggable()\n            },\n            () => {\n                this.loading = false;\n                m.redraw();\n\n                this.setDraggable()\n            }\n        );\n    }\n\n    /**\n     * Parse results and append them to the discussion list.\n     *\n     * @param {Discussion[]} results\n     * @return {Discussion[]}\n     */\n    parseResults(results) {\n        this.tags.forEach(tag => {\n\n            this.discussions[tag.slug()] = [];\n\n            results.forEach(discussion => {\n                discussion = app.store.getById(discussion.type, discussion.id);\n\n                if (discussion.tags().map(tag => tag.id()).indexOf(tag.id()) != -1) {\n                    this.discussions[tag.slug()].push(discussion);\n                }\n            });\n        })\n\n        this.loading = false;\n\n        m.lazyRedraw();\n\n        return results;\n    }\n\n    /**\n     * Load discussions based on the tags.\n     */\n    load() {\n        return app.request({\n            method: 'get',\n            url: app.forum.attribute('apiUrl') + '/board/' + this.tag.slug(),\n        });\n    }\n\n    /**\n     * Listens to dragging event and updates the sorting of the columns.\n     */\n    setDraggable() {\n        if (this.draggable == 'cards' && this.dragging) {\n            sortable('.Board--Item-List')\n        } else if (this.draggable == 'cards') {\n            sortable('.Board--Item-List', {\n                // connectWith: 'Board--Connected--Cards',\n                items: '.Card',\n                handle: '.Card--Handle',\n                placeholder: '<div class=\"Card Placeholder\"></div>',\n                forcePlaceholderSize: true\n            })[0].addEventListener('sortupdate', (e) => {\n\n            });\n        }\n\n        if (this.draggable == 'columns' && this.dragging) {\n            sortable('.Board--List')\n        } else if (this.draggable == 'columns') {\n            sortable('.Board--List', {\n                items: '.Board--Column',\n                handle: '.Board--Header',\n                placeholder: '<div class=\"Board--Column Placeholder\"></div>',\n                forcePlaceholderSize: true\n            })[0].addEventListener('sortupdate', (e) => {\n                const sorting = $(e.target).find('.Board--Column').map(function () {\n                    return $(this).attr('slug');\n                }).get();\n\n                this.updateColumnSorting(sorting);\n            });\n        }\n\n        this.dragging = true;\n    }\n\n    updateColumnSorting(sorting) {\n        return app.request({\n            method: 'post',\n            url: app.forum.attribute('apiUrl') + '/board/' + this.tag.slug() + '/sorting',\n            data: sorting\n        }).then(results => {\n            app.store.pushPayload(results);\n            m.redraw()\n\n            this.setDraggable()\n        })\n    }\n}\n","import Board from './pages/Board';\n\nexport default function (app) {\n    app.routes['flagrow.aqueduct.board'] = {path: '/board/:tag', component: Board.component()};\n}\n","import Search from \"flarum/components/Search\";\nimport UserSearchSource from \"./sources/UserSearchSource\";\nimport GroupSearchSource from \"./sources/GroupSearchSource\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport classList from \"flarum/utils/classList\";\nimport extractText from \"flarum/utils/extractText\";\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\nimport User from \"flarum/models/User\";\nimport Group from \"flarum/models/Group\";\n\nexport default class MultiSelectionInput extends Search {\n\n    config(isInitialized) {\n        if (isInitialized) return;\n\n        const $search = this;\n\n        this.$('.Search-results').on('click', (e) => {\n            var target = this.$('.SearchResult.active')\n\n\n            $search.addSelection(target.data('index'));\n\n            $search.$('.MultiSelectionInput').focus();\n        });\n\n        this.$('.Search-results').on('touchstart', (e) => {\n            var target = this.$(e.target.parentNode);\n\n            $search.addSelection(target.data('index'));\n\n            $search.$('.MultiSelectionInput').focus();\n        });\n\n        super.config(isInitialized);\n    }\n\n    generateLabel(selection, attrs = {}) {\n        // ..\n    }\n\n    view() {\n        if (typeof this.value() === 'undefined') {\n            this.value('');\n        }\n\n        return m('div', {\n            className: 'addSelectionModal-form-input'\n        }, [\n            m('div', {\n                className: 'MultiSelectionInput-selected RecipientsLabel'\n            }, this.props.selected().toArray().map(selection => this.generateLabel(selection, {\n                    onclick: () => {\n                        this.removeSelection(selection);\n                    }\n                })\n            )),\n            m('input', {\n                className: 'MultiSelectionInput FormControl ' + classList({\n                    open: !!this.value(),\n                    focused: !!this.value(),\n                    active: !!this.value(),\n                    loading: !!this.loadingSources\n                }),\n                config: function (element) {\n                    element.focus();\n                },\n                type: 'search',\n                placeholder: extractText(app.translator.trans('flagrow-aqueduct.forum.input.search_recipients')),\n                value: this.value(),\n                oninput: m.withAttr('value', this.value),\n                onfocus: () => this.hasFocus = true,\n                onblur: () => this.hasFocus = false\n            }),\n            m('ul', {\n                className: 'Dropdown-menu Search-results'\n            }, this.value() && this.value().length >= 3\n                ? this.sources.map(source => source.view(this.value()))\n                : LoadingIndicator.component({size: 'tiny', className: 'Button Button--icon Button--link'})\n            )\n        ]);\n    }\n\n    /**\n     * Build an item list of SearchSources.\n     *\n     * @return {ItemList}\n     */\n    sourceItems() {\n        const items = new ItemList();\n\n        // Add user source based on permissions.\n        items.add('users', new UserSearchSource());\n\n        // Add group source based on permissions.\n        items.add('groups', new GroupSearchSource());\n\n        return items;\n    }\n\n\n    /**\n     * Clear the search input and the current controller's active search.\n     */\n    clear() {\n        this.value('');\n\n        m.redraw();\n    }\n\n    /**\n     * Adds a recipient.\n     *\n     * @param value\n     */\n    addSelection(value) {\n\n        var values = value.split(':'),\n            type = values[0],\n            id = values[1];\n\n        var recipient = this.findRecipient(type, id);\n\n        this.props.selected().add(value, recipient);\n\n        this.clear();\n    }\n\n    /**\n     * Removes a recipient.\n     *\n     * @param recipient\n     */\n    removeSelection(recipient) {\n        var type;\n\n        if (recipient instanceof User) {\n            type = 'users';\n        }\n        if (recipient instanceof Group) {\n            type = 'groups';\n        }\n\n        this.props.selected().remove(type + \":\" + recipient.id());\n\n        m.redraw();\n    }\n\n    /**\n     * Loads a recipient from the global store.\n     *\n     * @param store\n     * @param id\n     * @returns {Model}\n     */\n    findRecipient(store, id) {\n        return app.store.getById(store, id);\n    }\n}\n","import highlight from 'flarum/helpers/highlight';\n\nexport default class GroupSearchSource {\n    search(query) {\n        return app.store.find('groups', {\n            filter: {q: query},\n            page: {limit: 5}\n        });\n    }\n\n    view(query) {\n        query = query.toLowerCase();\n\n        const results = app.store.all('groups')\n            .filter(group => group.namePlural().toLowerCase().substr(0, query.length) === query);\n\n        if (!results.length) return '';\n\n        return [\n            <li className=\"Dropdown-header\">{app.translator.trans('flagrow-byobu.forum.search.headings.groups')}</li>,\n            results.map(group => {\n                const groupName = group.namePlural();\n                var name = highlight(groupName, query);\n\n                return (\n                    <li className=\"SearchResult\" data-index={'groups:' + group.id()}>\n                        <a data-index={'groups:' + group.id()}>\n                            <span class=\"groupName\">{name}</span>\n                        </a>\n                    </li>\n                );\n            })\n        ];\n    }\n}\n","import highlight from 'flarum/helpers/highlight';\nimport avatar from 'flarum/helpers/avatar';\nimport username from 'flarum/helpers/username';\n\nexport default class UserSearchSource {\n    search(query) {\n        return app.store.find('users', {\n            filter: {q: query},\n            page: {limit: 5}\n        });\n    }\n  \n    view(query) {\n        query = query.toLowerCase();\n      \n        const results = app.store.all('users')\n            .filter(user => user.username().toLowerCase().substr(0, query.length) === query);\n\n        if (!results.length) return '';\n\n        return [\n            <li className=\"Dropdown-header\">{app.translator.trans('core.forum.search.users_heading')}</li>,\n            results.map(user => {\n                const name = username(user);\n                name.children[0] = highlight(name.children[0], query);\n\n                return (\n                    <li className='SearchResult' data-index={'users:' + user.id()}>\n                        <a data-index={'users:' + user.id()}>\n                            {avatar(user)}\n                            {name}\n                        </a>\n                    </li>\n                );\n            })\n        ];\n    }\n}\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/DiscussionHero'];","module.exports = flarum.core.compat['components/DiscussionPage'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Search'];","module.exports = flarum.core.compat['components/SplitDropdown'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/highlight'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = flarum.core.compat['models/Group'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['tags/helpers/tagIcon'];","module.exports = flarum.core.compat['tags/helpers/tagLabel'];","module.exports = flarum.core.compat['tags/models/Tag'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/classList'];","module.exports = flarum.core.compat['utils/extract'];","module.exports = flarum.core.compat['utils/extractText'];"],"sourceRoot":""}