{"version":3,"sources":["webpack://@flagrow/kanban/webpack/bootstrap","webpack://@flagrow/kanban/./forum.js","webpack://@flagrow/kanban/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flagrow/kanban/./node_modules/html5sortable/dist/html.sortable.js","webpack://@flagrow/kanban/./src/forum/addsBoardToDiscussion.js","webpack://@flagrow/kanban/./src/forum/components/Card.js","webpack://@flagrow/kanban/./src/forum/index.js","webpack://@flagrow/kanban/./src/forum/labels/assigneeLabel.js","webpack://@flagrow/kanban/./src/forum/labels/assigneesLabel.js","webpack://@flagrow/kanban/./src/forum/modals/AddAssigneeModal.js","webpack://@flagrow/kanban/./src/forum/modals/AddColumnModal.js","webpack://@flagrow/kanban/./src/forum/pages/Board.js","webpack://@flagrow/kanban/./src/forum/routes.js","webpack://@flagrow/kanban/./src/forum/search/MultiSelectionInput.js","webpack://@flagrow/kanban/./src/forum/search/sources/GroupSearchSource.js","webpack://@flagrow/kanban/./src/forum/search/sources/UserSearchSource.js","webpack://@flagrow/kanban/external \"flarum.core.compat['Component']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['Model']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['components/Button']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['components/DiscussionHero']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['components/DiscussionPage']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['components/Modal']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['components/Page']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['components/Search']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['components/SplitDropdown']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['extend']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['helpers/avatar']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['helpers/highlight']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['helpers/icon']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['helpers/username']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['models/Discussion']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['models/Group']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['models/User']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['tags/helpers/tagIcon']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['tags/helpers/tagLabel']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['tags/models/Tag']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['utils/ItemList']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['utils/classList']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['utils/extract']\"","webpack://@flagrow/kanban/external \"flarum.core.compat['utils/extractText']\""],"names":["extend","DiscussionPage","prototype","items","discussion","tags","filter","tag","position","isChild","controls","ItemList","forEach","add","slug","Button","component","children","app","translator","trans","name","icon","onclick","m","route","length","canManageBoard","modal","show","AddAssigneeModal","SplitDropdown","toArray","className","buttonClassName","DiscussionHero","props","users","assignedUsers","map","user","avatar","groups","assignedGroups","group","assignees","assigneesLabel","Card","init","isUnread","view","jumpTo","Math","min","lastPostNumber","lastReadPostNumber","id","title","footerControls","startUser","element","$","tooltip","placement","apply","arguments","Component","initializers","Tag","Model","attribute","canUseBoard","columns","hasMany","boardSort","boardMaxItems","Discussion","canViewBoard","routes","addsBoardToDiscussion","assigneeLabel","recipient","attrs","style","link","extract","label","User","username","href","config","Group","namePlural","assignee","push","selected","prop","assignInitialRecipients","merge","recipientSearch","MultiSelectionInput","content","type","disabled","select","e","metaKey","ctrlKey","indexOf","index","submit","onsubmit","preventDefault","recipients","recipientGroups","recipientUsers","save","relationships","then","current","stream","update","redraw","close","strategy","Modal","AddColumnModal","for","store","all","focused","toLowerCase","parent","substr","onready","tagLabel","withAttr","classList","pinned","child","colored","color","active","tagIcon","highlight","description","board","column","request","method","url","forum","results","pushPayload","Board","bodyClass","draggable","dragging","refresh","isInitialized","context","setTitle","setTitleCount","setDraggable","isEmpty","loading","discussions","clear","getBy","param","sort","a","b","load","parseResults","data","getById","lazyRedraw","sortable","sorted","handle","placeholder","forcePlaceholderSize","addEventListener","sorting","target","find","attr","get","updateColumnSorting","Page","path","$search","on","addSelection","focus","parentNode","generateLabel","selection","value","sources","sourceItems","removeSelection","open","loadingSources","extractText","oninput","onfocus","hasFocus","onblur","source","LoadingIndicator","size","UserSearchSource","GroupSearchSource","values","split","findRecipient","remove","Search","search","query","q","page","limit","groupName"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA,wC;;;;;;;;;;;;ACAA;AAAA;AAAe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;ACJA,iGAAC;AACD,MAAM,IAA0C;AAChD,IAAI,iCAAO,EAAE,oCAAE,OAAO;AAAA;AAAA;AAAA,oGAAC;AACvB,GAAG,MAAM,EAIN;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,YAAY;AACZ;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,GAAG;AACd,WAAW,SAAS;AACpB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,aAAa;AACxB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,aAAa;AACxB,WAAW,SAAS;AACpB;AACA;AACA;AACA,mBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,aAAa;AACxB;AACA;AACA;AACA,mBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,WAAW,EAAE;AACb;AACA;AACA;AACA,mBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB;AACA;AACA;AACA,mBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,SAAS;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,YAAY;AACvB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,WAAW,GAAG;AACd,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}",";(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.sortable = factory();\n  }\n}(this, function() {\n/*\n * HTML5 Sortable library\n * https://github.com/lukasoppermann/html5sortable\n *\n * Original code copyright 2012 Ali Farhadi.\n * This version is mantained by Lukas Oppermann <lukas@vea.re>\n * Previously also mantained by Alexandru Badiu <andu@ctrlz.ro>\n * jQuery-independent implementation by Nazar Mokrynskyi <nazar@mokrynskyi.com>\n *\n * Released under the MIT license.\n */\n'use strict'\n/*\n * variables global to the plugin\n */\nvar dragging\nvar draggingHeight\nvar placeholders = []\nvar sortables = []\n/**\n * Get or set data on element\n * @param {Element} element\n * @param {string} key\n * @param {*} value\n * @return {*}\n */\nvar _data = function (element, key, value) {\n  if (value === undefined) {\n    return element && element.h5s && element.h5s.data && element.h5s.data[key]\n  } else {\n    element.h5s = element.h5s || {}\n    element.h5s.data = element.h5s.data || {}\n    element.h5s.data[key] = value\n  }\n}\n/**\n * Remove data from element\n * @param {Element} element\n */\nvar _removeData = function (element) {\n  if (element.h5s) {\n    delete element.h5s.data\n  }\n}\n/**\n * Tests if an element matches a given selector. Comparable to jQuery's $(el).is('.my-class')\n * @param {el} DOM element\n * @param {selector} selector test against the element\n * @returns {boolean}\n */\n/* istanbul ignore next */\nvar _matches = function (el, selector) {\n  return (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector).call(el, selector)\n}\n/**\n * Filter only wanted nodes\n * @param {Array|NodeList} nodes\n * @param {Array/string} wanted\n * @returns {Array}\n */\nvar _filter = function (nodes, wanted) {\n  if (!wanted) {\n    return Array.prototype.slice.call(nodes)\n  }\n  var result = []\n  for (var i = 0; i < nodes.length; ++i) {\n    if (typeof wanted === 'string' && _matches(nodes[i], wanted)) {\n      result.push(nodes[i])\n    }\n    if (wanted.indexOf(nodes[i]) !== -1) {\n      result.push(nodes[i])\n    }\n  }\n  return result\n}\n/**\n * @param {Array|Element} element\n * @param {Array|string} event\n * @param {Function} callback\n */\nvar _on = function (element, event, callback) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      _on(element[i], event, callback)\n    }\n    return\n  }\n  element.addEventListener(event, callback)\n  element.h5s = element.h5s || {}\n  element.h5s.events = element.h5s.events || {}\n  element.h5s.events[event] = callback\n}\n/**\n * @param {Array|Element} element\n * @param {Array|string} event\n */\nvar _off = function (element, event) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      _off(element[i], event)\n    }\n    return\n  }\n  if (element.h5s && element.h5s.events && element.h5s.events[event]) {\n    element.removeEventListener(event, element.h5s.events[event])\n    delete element.h5s.events[event]\n  }\n}\n/**\n * @param {Array|Element} element\n * @param {string} attribute\n * @param {*} value\n */\nvar _attr = function (element, attribute, value) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      _attr(element[i], attribute, value)\n    }\n    return\n  }\n  element.setAttribute(attribute, value)\n}\n/**\n * @param {Array|Element} element\n * @param {string} attribute\n */\nvar _removeAttr = function (element, attribute) {\n  if (element instanceof Array) {\n    for (var i = 0; i < element.length; ++i) {\n      _removeAttr(element[i], attribute)\n    }\n    return\n  }\n  element.removeAttribute(attribute)\n}\n/**\n * @param {Element} element\n * @returns {{left: *, top: *}}\n */\nvar _offset = function (element) {\n  var rect = element.getClientRects()[0]\n  return {\n    left: rect.left + window.scrollX,\n    top: rect.top + window.scrollY\n  }\n}\n/*\n * remove event handlers from items\n * @param {Array|NodeList} items\n */\nvar _removeItemEvents = function (items) {\n  _off(items, 'dragstart')\n  _off(items, 'dragend')\n  _off(items, 'selectstart')\n  _off(items, 'dragover')\n  _off(items, 'dragenter')\n  _off(items, 'drop')\n}\n/*\n * Remove event handlers from sortable\n * @param {Element} sortable a single sortable\n */\nvar _removeSortableEvents = function (sortable) {\n  _off(sortable, 'dragover')\n  _off(sortable, 'dragenter')\n  _off(sortable, 'drop')\n}\n/*\n * Attach ghost to dataTransfer object\n * @param {Event} original event\n * @param {object} ghost-object with item, x and y coordinates\n */\nvar _attachGhost = function (event, ghost) {\n  // this needs to be set for HTML5 drag & drop to work\n  event.dataTransfer.effectAllowed = 'move'\n  // Firefox requires some arbitrary content in the data in order for\n  // the drag & drop functionality to work\n  event.dataTransfer.setData('text', 'arbitrary-content')\n\n  // check if setDragImage method is available\n  if (event.dataTransfer.setDragImage) {\n    event.dataTransfer.setDragImage(ghost.draggedItem, ghost.x, ghost.y)\n  }\n}\n/**\n * _addGhostPos clones the dragged item and adds it as a Ghost item\n * @param {Event} event - the event fired when dragstart is triggered\n * @param {object} ghost - .draggedItem = Element\n */\nvar _addGhostPos = function (event, ghost) {\n  if (!ghost.x) {\n    ghost.x = parseInt(event.pageX - _offset(ghost.draggedItem).left)\n  }\n  if (!ghost.y) {\n    ghost.y = parseInt(event.pageY - _offset(ghost.draggedItem).top)\n  }\n  return ghost\n}\n/**\n * _makeGhost decides which way to make a ghost and passes it to attachGhost\n * @param {Element} draggedItem - the item that the user drags\n */\nvar _makeGhost = function (draggedItem) {\n  return {\n    draggedItem: draggedItem\n  }\n}\n/**\n * _getGhost constructs ghost and attaches it to dataTransfer\n * @param {Event} event - the original drag event object\n * @param {Element} draggedItem - the item that the user drags\n */\n// TODO: could draggedItem be replaced by event.target in all instances\nvar _getGhost = function (event, draggedItem) {\n  // add ghost item & draggedItem to ghost object\n  var ghost = _makeGhost(draggedItem)\n  // attach ghost position\n  ghost = _addGhostPos(event, ghost)\n  // attach ghost to dataTransfer\n  _attachGhost(event, ghost)\n}\n/*\n * Remove data from sortable\n * @param {Element} sortable a single sortable\n */\nvar _removeSortableData = function (sortable) {\n  _removeData(sortable)\n  _removeAttr(sortable, 'aria-dropeffect')\n}\n/*\n * Remove data from items\n * @param {Array|Element} items\n */\nvar _removeItemData = function (items) {\n  _removeAttr(items, 'aria-grabbed')\n  _removeAttr(items, 'draggable')\n  _removeAttr(items, 'role')\n}\n/*\n * Check if two lists are connected\n * @param {Element} curList\n * @param {Element} destList\n */\nvar _listsConnected = function (curList, destList) {\n  if (curList === destList) {\n    return true\n  }\n  if (_data(curList, 'connectWith') !== undefined) {\n    return _data(curList, 'connectWith') === _data(destList, 'connectWith')\n  }\n  return false\n}\n/*\n * get handle or return item\n * @param {Array} items\n * @param {selector} handle\n */\nvar _getHandles = function (items, handle) {\n  var result = []\n  var handles\n  if (!handle) {\n    return items\n  }\n  for (var i = 0; i < items.length; ++i) {\n    handles = items[i].querySelectorAll(handle)\n    result = result.concat(Array.prototype.slice.call(handles))\n  }\n  return result\n}\n/*\n * Destroy the sortable\n * @param {Element} sortableElement a single sortable\n */\nvar _destroySortable = function (sortableElement) {\n  var opts = _data(sortableElement, 'opts') || {}\n  var items = _filter(_getChildren(sortableElement), opts.items)\n  var handles = _getHandles(items, opts.handle)\n  // remove event handlers & data from sortable\n  _removeSortableEvents(sortableElement)\n  _removeSortableData(sortableElement)\n  // remove event handlers & data from items\n  _off(handles, 'mousedown')\n  _removeItemEvents(items)\n  _removeItemData(items)\n}\n/*\n * Enable the sortable\n * @param {Element} sortableElement a single sortable\n */\nvar _enableSortable = function (sortableElement) {\n  var opts = _data(sortableElement, 'opts')\n  var items = _filter(_getChildren(sortableElement), opts.items)\n  var handles = _getHandles(items, opts.handle)\n  _attr(sortableElement, 'aria-dropeffect', 'move')\n  _data(sortableElement, '_disabled', 'false')\n  _attr(handles, 'draggable', 'true')\n  // IE FIX for ghost\n  // can be disabled as it has the side effect that other events\n  // (e.g. click) will be ignored\n  var spanEl = (document || window.document).createElement('span')\n  if (typeof spanEl.dragDrop === 'function' && !opts.disableIEFix) {\n    _on(handles, 'mousedown', function () {\n      if (items.indexOf(this) !== -1) {\n        this.dragDrop()\n      } else {\n        var parent = this.parentElement\n        while (items.indexOf(parent) === -1) {\n          parent = parent.parentElement\n        }\n        parent.dragDrop()\n      }\n    })\n  }\n}\n/*\n * Disable the sortable\n * @param {Element} sortableElement a single sortable\n */\nvar _disableSortable = function (sortableElement) {\n  var opts = _data(sortableElement, 'opts')\n  var items = _filter(_getChildren(sortableElement), opts.items)\n  var handles = _getHandles(items, opts.handle)\n  _attr(sortableElement, 'aria-dropeffect', 'none')\n  _data(sortableElement, '_disabled', 'true')\n  _attr(handles, 'draggable', 'false')\n  _off(handles, 'mousedown')\n}\n/*\n * Reload the sortable\n * @param {Element} sortableElement a single sortable\n * @description events need to be removed to not be double bound\n */\nvar _reloadSortable = function (sortableElement) {\n  var opts = _data(sortableElement, 'opts')\n  var items = _filter(_getChildren(sortableElement), opts.items)\n  var handles = _getHandles(items, opts.handle)\n  _data(sortableElement, '_disabled', 'false')\n  // remove event handlers from items\n  _removeItemEvents(items)\n  _off(handles, 'mousedown')\n  // remove event handlers from sortable\n  _removeSortableEvents(sortableElement)\n}\n/**\n * Get position of the element relatively to its sibling elements\n * @param {Element} element\n * @returns {number}\n */\nvar _index = function (element) {\n  if (!element.parentElement) {\n    return 0\n  }\n  return Array.prototype.indexOf.call(element.parentElement.children, element)\n}\n/**\n * Whether element is in DOM\n * @param {Element} element\n * @returns {boolean}\n */\nvar _attached = function (element) {\n  // document.body.contains(element)\n  return !!element.parentNode\n}\n/**\n * Convert HTML string into DOM element.\n * @param {Element|string} html\n * @param {string} tagname\n * @returns {Element}\n */\nvar _html2element = function (html, tagName) {\n  if (typeof html !== 'string') {\n    return html\n  }\n  var parentElement = document.createElement(tagName)\n  parentElement.innerHTML = html\n  return parentElement.firstChild\n}\n/**\n * Insert before target\n * @param {Element} target\n * @param {Element} element\n */\nvar _before = function (target, element) {\n  target.parentElement.insertBefore(\n    element,\n    target\n  )\n}\n/**\n * Insert after target\n * @param {Element} target\n * @param {Element} element\n */\nvar _after = function (target, element) {\n  target.parentElement.insertBefore(\n    element,\n    target.nextElementSibling\n  )\n}\n/**\n * Detach element from DOM\n * @param {Element} element\n */\nvar _detach = function (element) {\n  if (element.parentNode) {\n    element.parentNode.removeChild(element)\n  }\n}\n/**\n * Make native event that can be dispatched afterwards\n * @param {string} name\n * @param {object} detail\n * @returns {CustomEvent}\n */\nvar _makeEvent = function (name, detail) {\n  var e = document.createEvent('Event')\n  if (detail) {\n    e.detail = detail\n  }\n  e.initEvent(name, false, true)\n  return e\n}\n/**\n * @param {Element} sortableElement\n * @param {CustomEvent} event\n */\nvar _dispatchEventOnConnected = function (sortableElement, event) {\n  sortables.forEach(function (target) {\n    if (_listsConnected(sortableElement, target)) {\n      target.dispatchEvent(event)\n    }\n  })\n}\n\n/**\n * Creates and returns a new debounced version of the passed function which will postpone its execution until after wait milliseconds have elapsed\n * @param {fn} Function to debounce\n * @param {delay} time to wait before calling function with latest arguments, 0 - no debounce\n * @param {context} time to wait before calling function with latest arguments, 0 - no debounce\n * @returns {function} - debounced function\n */\nfunction _debounce (fn, delay, context) {\n  var timer = null\n\n  if (delay === 0) {\n    return fn\n  }\n  return function () {\n    var eContext = context || this\n    var args = arguments\n    clearTimeout(timer)\n    timer = setTimeout(function () {\n      fn.apply(eContext, args)\n    }, delay)\n  }\n}\n\nvar _getChildren = function (element) {\n  return element.children\n}\n\nvar _serialize = function (list) {\n  var children = _filter(_getChildren(list), _data(list, 'items'))\n  return children\n}\n\n/*\n * Public sortable object\n * @param {Array|NodeList} sortableElements\n * @param {object|string} options|method\n */\nvar sortable = function (sortableElements, options) {\n  var method = String(options)\n\n  options = (function (options) {\n    var result = {\n      connectWith: false,\n      placeholder: null,\n      disableIEFix: false,\n      placeholderClass: 'sortable-placeholder',\n      draggingClass: 'sortable-dragging',\n      hoverClass: false,\n      debounce: 0,\n      maxItems: 0\n    }\n    for (var option in options) {\n      result[option] = options[option]\n    }\n    return result\n  })(options)\n\n  if (options && typeof options.getChildren === 'function') {\n    _getChildren = options.getChildren\n  }\n\n  if (typeof sortableElements === 'string') {\n    sortableElements = document.querySelectorAll(sortableElements)\n  }\n\n  if (sortableElements instanceof window.Element) {\n    sortableElements = [sortableElements]\n  }\n\n  sortableElements = Array.prototype.slice.call(sortableElements)\n\n  if (/serialize/.test(method)) {\n    var serialized = []\n    sortableElements.forEach(function (sortableElement) {\n      serialized.push({\n        list: sortableElement,\n        children: _serialize(sortableElement)\n      })\n    })\n    return serialized\n  }\n\n  /* TODO: maxstatements should be 25, fix and remove line below */\n  /* jshint maxstatements:false */\n  sortableElements.forEach(function (sortableElement) {\n    if (/enable|disable|destroy/.test(method)) {\n      return sortable[method](sortableElement)\n    }\n\n    // get options & set options on sortable\n    options = _data(sortableElement, 'opts') || options\n    _data(sortableElement, 'opts', options)\n    // reset sortable\n    _reloadSortable(sortableElement)\n    // initialize\n    var items = _filter(_getChildren(sortableElement), options.items)\n    var index\n    var startParent\n    var startList\n    var placeholder = options.placeholder\n    var maxItems\n    if (!placeholder) {\n      placeholder = document.createElement(\n        /^ul|ol$/i.test(sortableElement.tagName) ? 'li' : 'div'\n      )\n    }\n    placeholder = _html2element(placeholder, sortableElement.tagName)\n    placeholder.classList.add.apply(\n      placeholder.classList,\n      options.placeholderClass.split(' ')\n    )\n\n    // setup sortable ids\n    if (!sortableElement.getAttribute('data-sortable-id')) {\n      var id = sortables.length\n      sortables[id] = sortableElement\n      _attr(sortableElement, 'data-sortable-id', id)\n      _attr(items, 'data-item-sortable-id', id)\n    }\n\n    _data(sortableElement, 'items', options.items)\n    placeholders.push(placeholder)\n    if (options.connectWith) {\n      _data(sortableElement, 'connectWith', options.connectWith)\n    }\n\n    _enableSortable(sortableElement)\n    _attr(items, 'role', 'option')\n    _attr(items, 'aria-grabbed', 'false')\n\n    // Mouse over class\n    if (options.hoverClass) {\n      var hoverClass = 'sortable-over'\n      if (typeof options.hoverClass === 'string') {\n        hoverClass = options.hoverClass\n      }\n\n      _on(items, 'mouseenter', function () {\n        this.classList.add(hoverClass)\n      })\n      _on(items, 'mouseleave', function () {\n        this.classList.remove(hoverClass)\n      })\n    }\n\n    // max items\n    if (options.maxItems && typeof options.maxItems === 'number') {\n      maxItems = options.maxItems\n    }\n\n    // Handle drag events on draggable items\n    _on(items, 'dragstart', function (e) {\n      e.stopImmediatePropagation()\n      if ((options.handle && !_matches(e.target, options.handle)) || this.getAttribute('draggable') === 'false') {\n        return\n      }\n\n      // add transparent clone or other ghost to cursor\n      _getGhost(e, this)\n      // cache selsection & add attr for dragging\n      this.classList.add(options.draggingClass)\n      dragging = this\n      _attr(dragging, 'aria-grabbed', 'true')\n      // grab values\n      index = _index(dragging)\n      draggingHeight = parseInt(window.getComputedStyle(dragging).height)\n      startParent = this.parentElement\n      startList = _serialize(startParent)\n      // dispatch sortstart event on each element in group\n      _dispatchEventOnConnected(sortableElement, _makeEvent('sortstart', {\n        item: dragging,\n        placeholder: placeholder,\n        startparent: startParent\n      }))\n    })\n    // Handle drag events on draggable items\n    _on(items, 'dragend', function () {\n      var newParent\n      if (!dragging) {\n        return\n      }\n      // remove dragging attributes and show item\n      dragging.classList.remove(options.draggingClass)\n      _attr(dragging, 'aria-grabbed', 'false')\n      dragging.style.display = dragging.oldDisplay\n      delete dragging.oldDisplay\n\n      placeholders.forEach(_detach)\n      newParent = this.parentElement\n      _dispatchEventOnConnected(sortableElement, _makeEvent('sortstop', {\n        item: dragging,\n        startparent: startParent\n      }))\n      if (index !== _index(dragging) || startParent !== newParent) {\n        _dispatchEventOnConnected(sortableElement, _makeEvent('sortupdate', {\n          item: dragging,\n          index: _filter(_getChildren(newParent), _data(newParent, 'items'))\n              .indexOf(dragging),\n          oldindex: items.indexOf(dragging),\n          elementIndex: _index(dragging),\n          oldElementIndex: index,\n          startparent: startParent,\n          endparent: newParent,\n          newEndList: _serialize(newParent),\n          newStartList: _serialize(startParent),\n          oldStartList: startList\n        }))\n      }\n      dragging = null\n      draggingHeight = null\n    })\n    // Handle drop event on sortable & placeholder\n    // TODO: REMOVE placeholder?????\n    _on([sortableElement, placeholder], 'drop', function (e) {\n      var visiblePlaceholder\n      if (!_listsConnected(sortableElement, dragging.parentElement)) {\n        return\n      }\n\n      e.preventDefault()\n      e.stopPropagation()\n      visiblePlaceholder = placeholders.filter(_attached)[0]\n      _after(visiblePlaceholder, dragging)\n      dragging.dispatchEvent(_makeEvent('dragend'))\n    })\n\n    var debouncedDragOverEnter = _debounce(function (element, pageY) {\n      if (!dragging) {\n        return\n      }\n\n      if (items.indexOf(element) !== -1) {\n        var thisHeight = parseInt(window.getComputedStyle(element).height)\n        var placeholderIndex = _index(placeholder)\n        var thisIndex = _index(element)\n        if (options.forcePlaceholderSize) {\n          placeholder.style.height = draggingHeight + 'px'\n        }\n\n        // Check if `element` is bigger than the draggable. If it is, we have to define a dead zone to prevent flickering\n        if (thisHeight > draggingHeight) {\n          // Dead zone?\n          var deadZone = thisHeight - draggingHeight\n          var offsetTop = _offset(element).top\n          if (placeholderIndex < thisIndex &&\n              pageY < offsetTop + deadZone) {\n            return\n          }\n          if (placeholderIndex > thisIndex &&\n              pageY > offsetTop + thisHeight - deadZone) {\n            return\n          }\n        }\n\n        if (dragging.oldDisplay === undefined) {\n          dragging.oldDisplay = dragging.style.display\n        }\n\n        if (dragging.style.display !== 'none') {\n          dragging.style.display = 'none'\n        }\n\n        if (placeholderIndex < thisIndex) {\n          _after(element, placeholder)\n        } else {\n          _before(element, placeholder)\n        }\n        // Intentionally violated chaining, it is more complex otherwise\n        placeholders\n          .filter(function (element) { return element !== placeholder })\n          .forEach(_detach)\n      } else {\n        if (placeholders.indexOf(element) === -1 &&\n            !_filter(_getChildren(element), options.items).length) {\n          placeholders.forEach(_detach)\n          element.appendChild(placeholder)\n        }\n      }\n    }, options.debounce)\n\n    // Handle dragover and dragenter events on draggable items\n    var onDragOverEnter = function (e) {\n      if (!dragging || !_listsConnected(sortableElement, dragging.parentElement) || _data(sortableElement, '_disabled') === 'true') {\n        return\n      }\n      if (maxItems && _filter(_getChildren(sortableElement), _data(sortableElement, 'items')).length >= maxItems) {\n        return\n      }\n      e.preventDefault()\n      e.stopPropagation()\n      e.dataTransfer.dropEffect = 'move'\n      debouncedDragOverEnter(this, e.pageY)\n    }\n\n    _on(items.concat(sortableElement), 'dragover', onDragOverEnter)\n    _on(items.concat(sortableElement), 'dragenter', onDragOverEnter)\n  })\n\n  return sortableElements\n}\n\nsortable.destroy = function (sortableElement) {\n  _destroySortable(sortableElement)\n}\n\nsortable.enable = function (sortableElement) {\n  _enableSortable(sortableElement)\n}\n\nsortable.disable = function (sortableElement) {\n  _disableSortable(sortableElement)\n}\n\n\nreturn sortable;\n}));\n","import {extend} from \"flarum/extend\";\nimport DiscussionPage from \"flarum/components/DiscussionPage\";\nimport Button from \"flarum/components/Button\";\nimport SplitDropdown from \"flarum/components/SplitDropdown\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport avatar from \"flarum/helpers/avatar\";\nimport icon from \"flarum/helpers/icon\";\nimport DiscussionHero from \"flarum/components/DiscussionHero\";\nimport assigneesLabel from \"./labels/assigneesLabel\";\nimport AddAssigneeModal from \"./modals/AddAssigneeModal\";\n\nexport default function () {\n\n    // Add a control allowing direct visiting of the board.\n    extend(DiscussionPage.prototype, 'sidebarItems', function (items) {\n        const discussion = this.discussion;\n        let tags = discussion.tags().filter(tag => tag.position() !== null && !tag.isChild());\n\n        let controls = new ItemList;\n\n        tags.forEach(tag => {\n            controls.add('board-' + tag.slug(), Button.component({\n                children: app.translator.trans('flagrow-kanban.forum.discussion.buttons.show-board', {tag: tag.name()}),\n                icon: 'fab fa-trello',\n                onclick: () => m.route(app.route('flagrow.kanban.board', {tag: tag.slug()}))\n            }));\n        })\n\n        if (tags.length > 0) {\n            if (discussion.canManageBoard()) {\n                controls.add('assignee', Button.component({\n                    children: app.translator.trans('flagrow-kanban.forum.discussion.buttons.set-assignees'),\n                    icon: 'fas fa-user-cog',\n                    onclick: () => app.modal.show(new AddAssigneeModal({discussion}))\n                }));\n            }\n\n            items.add(\n                'board',\n                SplitDropdown.component({\n                    children: controls.toArray(),\n                    icon: 'fab fa-trello',\n                    className: 'App-primaryControl',\n                    buttonClassName: 'Button--secondary'\n                }),\n                -50\n            );\n        }\n    });\n    /**\n     *\n     * Adds User labels on the discussion Hero.\n     */\n    extend(DiscussionHero.prototype, 'items', function(items) {\n        const discussion = this.props.discussion;\n\n        let users = discussion.assignedUsers().map(user => {\n            return avatar(user);\n        });\n        let groups = discussion.assignedGroups().map(group => {\n            return icon(group.icon());\n        });\n\n        const assignees = users + groups;\n\n        if (assignees.length > 0) {\n            items.add('assignees', assigneesLabel(assignees), 3);\n        }\n    });\n}\n","import Component from 'flarum/Component';\nimport ItemList from 'flarum/utils/ItemList';\nimport icon from 'flarum/helpers/icon';\nimport avatar from 'flarum/helpers/avatar';\n\nexport default class Card extends Component {\n    init() {\n        this.discussion = this.props.discussion;\n        this.isUnread = this.discussion.isUnread();\n    }\n\n    view() {\n        const jumpTo = Math.min(this.discussion.lastPostNumber(), (this.discussion.lastReadPostNumber() || 0) + 1);\n\n        return m('li', {\n            className: 'Card' + (this.isUnread ? ' Unread' : ''),\n            discussion: this.discussion.id()\n        }, m('div', {className: 'Card--Handle'}, [\n            m('div', {className: 'Card--Header'}, [\n                // Issue title.\n                m('div', {className: 'Card--Title'},\n                    <a href={app.route.discussion(this.discussion, jumpTo)}\n                       config={m.route}>\n                        {this.discussion.title()}\n                    </a>\n                )\n            ]),\n            m('div', {className: 'Card--Footer'}, this.footerControls().toArray())\n        ]))\n    }\n\n    footerControls() {\n        let items = new ItemList;\n\n        const startUser = this.discussion.user();\n\n        items.add('startUser',\n            <a href={startUser ? app.route.user(startUser) : '#'}\n              className=\"Card--Author\"\n              config={function(element) {\n                  $(element).tooltip({placement: 'right'});\n                  m.route.apply(this, arguments);\n              }}>\n            {avatar(startUser, {title: ''})}\n        </a>);\n\n        items.add('count', m('div', {className: 'Card--Replies-Count'}, [\n            icon(this.isUnread ? 'commenting-o' : 'comment-o'),\n            this.discussion[this.isUnread ? 'unreadCount' : 'replyCount']()\n        ]));\n\n        return items;\n    }\n}\n","import routes from './routes';\nimport addsBoardToDiscussion from './addsBoardToDiscussion';\n\nimport Model from 'flarum/Model';\nimport Tag from 'flarum/tags/models/Tag';\nimport Discussion from 'flarum/models/Discussion';\n\napp.initializers.add('flagrow-kanban', function(app) {\n    Tag.prototype.canManageBoard = Model.attribute('canManageBoard');\n    Tag.prototype.canUseBoard = Model.attribute('canUseBoard');\n    Tag.prototype.columns = Model.hasMany('columns');\n    Tag.prototype.boardSort = Model.attribute('boardSort') || null;\n    Tag.prototype.boardMaxItems = Model.attribute('boardMaxItems') || null;\n\n    Discussion.prototype.canViewBoard = Model.attribute('canViewBoard');\n    Discussion.prototype.canUseBoard = Model.attribute('canUseBoard');\n    Discussion.prototype.canManageBoard = Model.attribute('canManageBoard');\n    Discussion.prototype.assignedUsers = Model.hasMany('assignedUsers');\n    Discussion.prototype.assignedGroups = Model.hasMany('assignedGroups');\n\n    routes(app);\n\n    addsBoardToDiscussion();\n});\n","import extract from 'flarum/utils/extract';\nimport username from 'flarum/helpers/username';\nimport User from 'flarum/models/User';\nimport Group from 'flarum/models/Group';\n\nexport default function assigneeLabel(recipient, attrs = {}) {\n    attrs.style = attrs.style || {};\n    attrs.className = 'RecipientLabel ' + (attrs.className || '');\n\n    const link = extract(attrs, 'link');\n\n    var label;\n\n    if (recipient instanceof User) {\n        label = username(recipient);\n\n        if (link) {\n            attrs.title = recipient.username() || '';\n            attrs.href = app.route.user(recipient);\n            attrs.config = m.route;\n        }\n    } else if (recipient instanceof Group) {\n        label = recipient.namePlural();\n    }\n\n    return (\n        m((link ? 'a' : 'span'), attrs,\n            <span className=\"RecipientLabel-text\">\n            {label}\n        </span>\n        )\n    );\n}\n","import extract from 'flarum/utils/extract';\nimport assigneeLabel from './assigneeLabel';\n\nexport default function assigneesLabel(assignees, attrs = {}) {\n    const children = [];\n    const link = extract(attrs, 'link');\n\n    attrs.className = 'AssigneesLabel ' + (attrs.className || '');\n\n    if (assignees) {\n        assignees.forEach(assignee => {\n            children.push(assigneeLabel(assignee, {link}));\n        });\n    } else {\n        children.push(assigneeLabel());\n    }\n\n    return <span {...attrs}>{children}</span>;\n}\n","import Modal from \"flarum/components/Modal\";\nimport DiscussionPage from \"flarum/components/DiscussionPage\";\nimport Button from \"flarum/components/Button\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport MultiSelectionInput from \"../search/MultiSelectionInput\";\nimport User from \"flarum/models/User\";\nimport Group from \"flarum/models/Group\";\n\nexport default class AddAssigneeModal extends Modal {\n    init() {\n        super.init();\n\n        this.selected = m.prop(new ItemList);\n\n        if (this.props.discussion) {\n            // Adds recipients of the currently viewed discussion.\n            this.assignInitialRecipients(this.props.discussion);\n        } else if (this.props.assignees) {\n            // Adds previously selected recipients.\n            this.selected().merge(this.props.assignees);\n        }\n\n        this.recipientSearch = MultiSelectionInput.component({\n            selected: this.selected,\n            discussion: this.props.discussion\n        });\n    }\n\n    assignInitialRecipients(discussion) {\n        discussion.assignedUsers().map(user => {\n            this.selected().add(\"users:\" + user.id(), user);\n        });\n        discussion.assignedGroups().map(group => {\n            this.selected().add(\"groups:\" + group.id(), group);\n        });\n    }\n\n    className() {\n        return 'AddAssigneeModal';\n    }\n\n    title() {\n        return app.translator.trans('flagrow-kanban.forum.modals.set-assignee.title');\n    }\n\n    content() {\n        return [\n            <div className=\"Modal-body\">\n                <div className=\"AddAssigneeModal-form\">\n                    {this.recipientSearch}\n                    <div className=\"AddAssigneeModal-form-submit App-primaryControl\">\n                        {Button.component({\n                            type: 'submit',\n                            className: 'Button Button--primary',\n                            disabled: false,\n                            icon: 'far fa-check',\n                            children: app.translator.trans('flagrow-kanban.forum.modals.set-assignee.submit')\n                        })}\n                    </div>\n                </div>\n            </div>\n        ];\n    }\n\n    select(e) {\n        // Ctrl + Enter submits the selection, just Enter completes the current entry\n        if (e.metaKey || e.ctrlKey || this.selected.indexOf(this.index) !== -1) {\n            if (this.selected().length) {\n                this.$('form').submit();\n            }\n        }\n    }\n\n    onsubmit(e) {\n        e.preventDefault();\n\n        const discussion = this.props.discussion;\n        const recipients = this.selected();\n\n        var recipientGroups = [];\n        var recipientUsers = [];\n\n        recipients.toArray().forEach(recipient => {\n\n            if (recipient instanceof User) {\n                recipientUsers.push(recipient);\n            }\n\n            if (recipient instanceof Group) {\n                recipientGroups.push(recipient);\n            }\n        });\n\n        if (discussion) {\n            discussion.save({relationships: {recipientUsers, recipientGroups}})\n                .then(() => {\n                    if (app.current instanceof DiscussionPage) {\n                        app.current.stream.update();\n                    }\n                    m.redraw();\n                });\n        }\n\n        if (this.props.onsubmit) this.props.onsubmit(recipients, recipientUsers, recipientGroups);\n\n        app.modal.close();\n\n        m.redraw.strategy('none');\n    }\n}\n","import Modal from 'flarum/components/Modal';\nimport tagLabel from 'flarum/tags/helpers/tagLabel';\nimport tagIcon from 'flarum/tags/helpers/tagIcon';\nimport highlight from 'flarum/helpers/highlight';\nimport classList from 'flarum/utils/classList';\nimport Button from \"flarum/components/Button\";\n\nexport default class AddColumnModal extends Modal {\n\n    title() {\n        return app.translator.trans('flagrow-kanban.forum.board.modals.add-column.title');\n    }\n    init() {\n        super.init();\n        this.for = this.props.tag;\n\n        this.tags = app.store.all('tags').filter(tag => {\n            return this.for.columns().indexOf(tag) == -1;\n        });\n\n        this.selected = m.prop('');\n        this.filter = m.prop('');\n        this.index = this.tags[0].id();\n        this.focused = false;\n    }\n\n    content() {\n        let tags = this.tags;\n        const filter = this.filter().toLowerCase();\n\n        tags = tags.filter(tag => {\n            return tag.id() != this.for.id() &&\n                (tag.position() === null || (tag.parent() && tag.parent().id() == this.for.id()));\n        })\n\n        // If the user has entered text in the filter input, then filter by tags\n        // whose name matches what they've entered.\n        if (filter) {\n            tags = tags.filter(tag => tag.name().substr(0, filter.length).toLowerCase() === filter);\n        }\n\n        return [\n          <div className=\"Modal-body\">\n            <div className=\"TagDiscussionModal-form\">\n              <div className=\"TagDiscussionModal-form-input\">\n                <div className={'TagsInput FormControl ' + (this.focused ? 'focus' : '')}>\n                  <span className=\"TagsInput-selected\">\n                    {this.selected() ?\n                            <span className=\"TagsInput-tag\" onclick={() => {\n                            this.selected('')\n                            this.onready();\n                          }}>\n                            {tagLabel(this.selected())}\n                          </span>\n                        : ''\n                    }\n                  </span>\n                  <input className=\"FormControl\"\n                    value={this.filter()}\n                    oninput={m.withAttr('value', this.filter)}\n                    onfocus={() => this.focused = true}\n                    onblur={() => this.focused = false}/>\n                </div>\n              </div>\n              <div className=\"TagDiscussionModal-form-submit App-primaryControl\">\n                {Button.component({\n                  type: 'submit',\n                  className: 'Button Button--primary',\n                  disabled: !this.selected(),\n                  icon: 'check',\n                  children: app.translator.trans('flarum-tags.forum.choose_tags.submit_button')\n                })}\n              </div>\n            </div>\n          </div>,\n\n          <div className=\"Modal-footer\">\n            <ul className=\"TagDiscussionModal-list SelectTagList\">\n              {tags\n                .filter(tag => filter || !tag.parent() || this.selected().id == tag.id())\n                .map(tag => (\n                  <li data-index={tag.id()}\n                    className={classList({\n                      pinned: tag.position() !== null,\n                      child: !!tag.parent(),\n                      colored: !!tag.color(),\n                      selected: this.selected() && this.selected().id == tag.id(),\n                      active: this.index === tag\n                    })}\n                    style={{color: tag.color()}}\n                    onmouseover={() => this.index = tag}\n                    onclick={() => this.selected(tag)}\n                  >\n                    {tagIcon(tag)}\n                    <span className=\"SelectTagListItem-name\">\n                      {highlight(tag.name(), filter)}\n                    </span>\n                    {tag.description()\n                      ? (\n                        <span className=\"SelectTagListItem-description\">\n                          {tag.description()}\n                        </span>\n                      ) : ''}\n                  </li>\n                ))}\n            </ul>\n          </div>\n        ];\n    }\n\n    className() {\n        return 'AddColumnModal';\n    }\n\n\n    onsubmit(e) {\n        e.preventDefault();\n\n        const board = this.for;\n        const column = this.selected();\n\n        app.request({\n            method: 'POST',\n            url: app.forum.attribute('apiUrl') + '/board/' + board.slug() + '/columns/' + column.slug(),\n        }).then(results => {\n            let tag = app.store.pushPayload(results);\n\n            if (this.props.onsubmit) this.props.onsubmit(tag);\n\n            app.modal.close();\n\n            m.redraw.strategy('none');\n        });\n    }\n}\n","import sortable from 'html5sortable';\n\nimport {extend} from \"flarum/extend\";\nimport Page from \"flarum/components/Page\";\nimport SplitDropdown from 'flarum/components/SplitDropdown';\nimport Button from 'flarum/components/Button';\nimport ItemList from 'flarum/utils/ItemList';\nimport AddColumnModal from '../modals/AddColumnModal';\nimport Card from '../components/Card';\n\nexport default class Board extends Page {\n    init() {\n        super.init();\n\n        this.bodyClass = 'Kanban--Board';\n\n        this.draggable = 'cards';\n        this.dragging = null;\n\n        this.refresh(true);\n    }\n\n\n    config(isInitialized, context) {\n        super.config(...arguments);\n\n        if (isInitialized) return;\n\n        app.setTitle('');\n        app.setTitleCount(0);\n\n        if (this.tag.canManageBoard()) {\n            this.setDraggable();\n        }\n    }\n\n    view() {\n        return m('div', {\n            className: 'Board'\n        }, [\n            m('div', {\n                className: 'Board--Controls'\n            }, m('div', {className: 'container'}, [\n                this.controls().isEmpty() ? [] :\n                    SplitDropdown.component({\n                        children: this.controls().toArray(),\n                        icon: 'ellipsis-v',\n                        className: 'App-primaryControl',\n                        buttonClassName: 'Button--primary'\n                    })\n            ])),\n            m('div', {\n                className: 'Board--List'\n            }, this.tags.map(tag => {\n                return this.column(tag);\n            }))\n        ])\n    }\n\n    controls() {\n        let items = new ItemList;\n        let tag = this.tag;\n\n        if (tag.canManageBoard()) {\n            items.add('add-column', Button.component({\n                icon: 'gear',\n                children: app.translator.trans('flagrow-kanban.forum.board.buttons.add-column'),\n                onclick: () => app.modal.show(new AddColumnModal({\n                    tag: tag,\n                    onsubmit: tag => {\n                        this.refresh(true)\n                    }\n                }))\n            }))\n        }\n\n        return items;\n    }\n\n    column(tag) {\n        return m('div', {\n            className: 'Board--Column ' + tag.name(),\n            slug: tag.slug()\n        }, [\n            m('div', {className: 'Board--Inner'}, [\n                m('header', {\n                    className: 'Board--Header' + (tag.color() ? ' colored' : ''),\n                    style: tag.color() ? 'border-top-color: ' + tag.color() + ';' : ''\n                }, m('h4', [tag.name(), m('span', tag.description())])),\n                m('div', {\n                    className: 'Board--Item-List'\n                }, this.loading || this.discussions[tag.slug()].length == 0 ? '' : m('ul', this.discussions[tag.slug()].map(discussion => {\n                    return Card.component({discussion});\n                })))\n            ])\n        ]);\n    }\n\n    /**\n     * Clear and reload the discussion list.\n     *\n     * @public\n     */\n    refresh(clear = true) {\n        if (clear) {\n            this.loading = true;\n\n            // The primary tag for which we will show the board.\n            this.tag = app.store.getBy('tags', 'slug', m.route.param('tag'));\n\n            /**\n             * The discussions in the discussion list.\n             *\n             * @type {Discussion[]}\n             */\n            this.discussions = {};\n\n            this.tags = this.tag.columns() || [];\n        }\n\n        this.tags.sort((a, b) => {\n            return a.boardSort() - b.boardSort();\n        });\n\n        this.load().then(\n            results => {\n                app.store.pushPayload(results);\n\n                this.discussions = {};\n                this.parseResults(results.data);\n\n                this.setDraggable()\n            },\n            () => {\n                this.loading = false;\n                m.redraw();\n\n                this.setDraggable()\n            }\n        );\n    }\n\n    /**\n     * Parse results and append them to the discussion list.\n     *\n     * @param {Discussion[]} results\n     * @return {Discussion[]}\n     */\n    parseResults(results) {\n        this.tags.forEach(tag => {\n\n            this.discussions[tag.slug()] = [];\n\n            results.forEach(discussion => {\n                discussion = app.store.getById(discussion.type, discussion.id);\n\n                if (discussion.tags().map(tag => tag.id()).indexOf(tag.id()) != -1) {\n                    this.discussions[tag.slug()].push(discussion);\n                }\n            });\n        })\n\n        this.loading = false;\n\n        m.lazyRedraw();\n\n        return results;\n    }\n\n    /**\n     * Load discussions based on the tags.\n     */\n    load() {\n        return app.request({\n            method: 'get',\n            url: app.forum.attribute('apiUrl') + '/board/' + this.tag.slug(),\n        });\n    }\n\n    /**\n     * Listens to dragging event and updates the sorting of the columns.\n     */\n    setDraggable() {\n        if (this.draggable === 'cards' && this.dragging) {\n            sortable('.Board--Item-List');\n        } else if (this.draggable === 'cards') {\n            const sorted = sortable('.Board--Item-List', {\n                // connectWith: 'Board--Connected--Cards',\n                items: '.Card',\n                handle: '.Card--Handle',\n                placeholder: '<div class=\"Card Placeholder\"></div>',\n                forcePlaceholderSize: true\n            });\n            if (sorted.length > 0) {\n                sorted[0].addEventListener('sortupdate', (e) => {\n                });\n            }\n        }\n\n        if (this.draggable === 'columns' && this.dragging) {\n            sortable('.Board--List');\n        } else if (this.draggable === 'columns') {\n            const sorted = sortable('.Board--List', {\n                items: '.Board--Column',\n                handle: '.Board--Header',\n                placeholder: '<div class=\"Board--Column Placeholder\"></div>',\n                forcePlaceholderSize: true\n            });\n            if (sorted.length > 0) {\n                sorted[0].addEventListener('sortupdate', (e) => {\n                    const sorting = $(e.target).find('.Board--Column').map(function () {\n                        return $(this).attr('slug');\n                    }).get();\n\n                    this.updateColumnSorting(sorting);\n                });\n            }\n        }\n\n        this.dragging = true;\n    }\n\n    updateColumnSorting(sorting) {\n        return app.request({\n            method: 'post',\n            url: app.forum.attribute('apiUrl') + '/board/' + this.tag.slug() + '/sorting',\n            data: sorting\n        }).then(results => {\n            app.store.pushPayload(results);\n            m.redraw()\n\n            this.setDraggable()\n        })\n    }\n}\n","import Board from './pages/Board';\n\nexport default function (app) {\n    app.routes['flagrow.kanban.board'] = {path: '/board/:tag', component: Board.component()};\n}\n","import Search from \"flarum/components/Search\";\nimport UserSearchSource from \"./sources/UserSearchSource\";\nimport GroupSearchSource from \"./sources/GroupSearchSource\";\nimport ItemList from \"flarum/utils/ItemList\";\nimport classList from \"flarum/utils/classList\";\nimport extractText from \"flarum/utils/extractText\";\nimport LoadingIndicator from \"flarum/components/LoadingIndicator\";\nimport User from \"flarum/models/User\";\nimport Group from \"flarum/models/Group\";\n\nexport default class MultiSelectionInput extends Search {\n\n    config(isInitialized) {\n        if (isInitialized) return;\n\n        const $search = this;\n\n        this.$('.Search-results').on('click', (e) => {\n            var target = this.$('.SearchResult.active')\n\n\n            $search.addSelection(target.data('index'));\n\n            $search.$('.MultiSelectionInput').focus();\n        });\n\n        this.$('.Search-results').on('touchstart', (e) => {\n            var target = this.$(e.target.parentNode);\n\n            $search.addSelection(target.data('index'));\n\n            $search.$('.MultiSelectionInput').focus();\n        });\n\n        super.config(isInitialized);\n    }\n\n    generateLabel(selection, attrs = {}) {\n        // ..\n    }\n\n    view() {\n        if (typeof this.value() === 'undefined') {\n            this.value('');\n        }\n\n        // Initialize search sources in the view rather than the constructor so\n        // that we have access to app.forum.\n        if (!this.sources) {\n            this.sources = this.sourceItems().toArray();\n        }\n\n        return m('div', {\n            className: 'addSelectionModal-form-input'\n        }, [\n            m('div', {\n                className: 'MultiSelectionInput-selected RecipientsLabel'\n            }, this.props.selected().toArray().map(selection => this.generateLabel(selection, {\n                    onclick: () => {\n                        this.removeSelection(selection);\n                    }\n                })\n            )),\n            m('input', {\n                className: 'MultiSelectionInput FormControl ' + classList({\n                    open: !!this.value(),\n                    focused: !!this.value(),\n                    active: !!this.value(),\n                    loading: !!this.loadingSources\n                }),\n                config: function (element) {\n                    element.focus();\n                },\n                type: 'search',\n                placeholder: extractText(app.translator.trans('flagrow-kanban.forum.modals.set-assignee.input')),\n                value: this.value(),\n                oninput: m.withAttr('value', this.value),\n                onfocus: () => this.hasFocus = true,\n                onblur: () => this.hasFocus = false\n            }),\n            m('ul', {\n                className: 'Dropdown-menu Search-results'\n            }, this.value() && this.value().length >= 3\n                ? this.sources.map(source => source.view(this.value()))\n                : LoadingIndicator.component({size: 'tiny', className: 'Button Button--icon Button--link'})\n            )\n        ]);\n    }\n\n    /**\n     * Build an item list of SearchSources.\n     *\n     * @return {ItemList}\n     */\n    sourceItems() {\n        const items = new ItemList();\n\n        // Add user source based on permissions.\n        items.add('users', new UserSearchSource());\n\n        // Add group source based on permissions.\n        items.add('groups', new GroupSearchSource());\n\n        return items;\n    }\n\n\n    /**\n     * Clear the search input and the current controller's active search.\n     */\n    clear() {\n        this.value('');\n\n        m.redraw();\n    }\n\n    /**\n     * Adds a recipient.\n     *\n     * @param value\n     */\n    addSelection(value) {\n\n        let values = value.split(':'),\n            type = values[0],\n            id = values[1];\n\n        let recipient = this.findRecipient(type, id);\n\n        this.props.selected().add(value, recipient);\n\n        this.clear();\n    }\n\n    /**\n     * Removes a recipient.\n     *\n     * @param recipient\n     */\n    removeSelection(recipient) {\n        let type;\n\n        if (recipient instanceof User) {\n            type = 'users';\n        }\n        if (recipient instanceof Group) {\n            type = 'groups';\n        }\n\n        this.props.selected().remove(type + \":\" + recipient.id());\n\n        m.redraw();\n    }\n\n    /**\n     * Loads a recipient from the global store.\n     *\n     * @param store\n     * @param id\n     * @returns {Model}\n     */\n    findRecipient(store, id) {\n        return app.store.getById(store, id);\n    }\n}\n","import highlight from 'flarum/helpers/highlight';\n\nexport default class GroupSearchSource {\n    search(query) {\n        return app.store.find('groups', {\n            filter: {q: query},\n            page: {limit: 5}\n        });\n    }\n\n    view(query) {\n        query = query.toLowerCase();\n\n        const results = app.store.all('groups')\n            .filter(group => group.namePlural().toLowerCase().substr(0, query.length) === query);\n\n        if (!results.length) return '';\n\n        return [\n            <li className=\"Dropdown-header\">{app.translator.trans('flagrow-byobu.forum.search.headings.groups')}</li>,\n            results.map(group => {\n                const groupName = group.namePlural();\n                var name = highlight(groupName, query);\n\n                return (\n                    <li className=\"SearchResult\" data-index={'groups:' + group.id()}>\n                        <a data-index={'groups:' + group.id()}>\n                            <span class=\"groupName\">{name}</span>\n                        </a>\n                    </li>\n                );\n            })\n        ];\n    }\n}\n","import highlight from 'flarum/helpers/highlight';\nimport avatar from 'flarum/helpers/avatar';\nimport username from 'flarum/helpers/username';\n\nexport default class UserSearchSource {\n    search(query) {\n        return app.store.find('users', {\n            filter: {q: query},\n            page: {limit: 5}\n        });\n    }\n  \n    view(query) {\n        query = query.toLowerCase();\n      \n        const results = app.store.all('users')\n            .filter(user => user.username().toLowerCase().substr(0, query.length) === query);\n\n        if (!results.length) return '';\n\n        return [\n            <li className=\"Dropdown-header\">{app.translator.trans('core.forum.search.users_heading')}</li>,\n            results.map(user => {\n                const name = username(user);\n                name.children[0] = highlight(name.children[0], query);\n\n                return (\n                    <li className='SearchResult' data-index={'users:' + user.id()}>\n                        <a data-index={'users:' + user.id()}>\n                            {avatar(user)}\n                            {name}\n                        </a>\n                    </li>\n                );\n            })\n        ];\n    }\n}\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/DiscussionHero'];","module.exports = flarum.core.compat['components/DiscussionPage'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/Search'];","module.exports = flarum.core.compat['components/SplitDropdown'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/highlight'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = flarum.core.compat['models/Group'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['tags/helpers/tagIcon'];","module.exports = flarum.core.compat['tags/helpers/tagLabel'];","module.exports = flarum.core.compat['tags/models/Tag'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/classList'];","module.exports = flarum.core.compat['utils/extract'];","module.exports = flarum.core.compat['utils/extractText'];"],"sourceRoot":""}